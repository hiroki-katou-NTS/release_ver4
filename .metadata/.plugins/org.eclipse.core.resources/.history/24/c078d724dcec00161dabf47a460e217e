/**
 * 
 */
package nts.uk.ctx.pr.core.infra.repository.organization.laitv;

import java.util.List;
import java.util.Optional;

import lombok.val;
import nts.arc.layer.infra.data.JpaRepository;
import nts.uk.ctx.basic.infra.entity.organization.position.laitv.CmnmtJobTitle_PK_ba;
import nts.uk.ctx.basic.infra.entity.organization.position.laitv.CmnmtJobTitle_ba;
import nts.uk.ctx.basic.organization.position_ba.PositionRepository_ba;
import nts.uk.ctx.basic.organization.position_ba.Position_ba;

/**
 * @author laitv
 *
 */

public class JpaPositionRepository_ba extends JpaRepository implements PositionRepository_ba {

	private final String SELECT_NO_WHERE = "SELECT c FROM CmmtJobTitle c ";
	private final String SELECT_ALL_BY_COMPANY = SELECT_NO_WHERE + " WHERE c.cmmtJobTitlePK.ccd = :companyCode ";
	private final String SELECT_DETAIL = SELECT_ALL_BY_COMPANY + " AND c.cmmtJobTitlePK.jobCd = :jobCode ";

	private static Position_ba toDomain(CmnmtJobTitle_ba entity) {
		val position = Position_ba.createSimpleFromJavaType(entity.endDate, entity.startDate,
				entity.cmnmtJobTitle_pk_ba.jobCode, entity.jobName, entity.jobOutCode, entity.meMo,
				entity.cmnmtJobTitle_pk_ba.companyCode);
		return position;

	}

	private static CmnmtJobTitle_ba toEntity(Position_ba domain) {

		val entity = new CmnmtJobTitle_ba();
		entity.cmnmtJobTitle_pk_ba = new CmnmtJobTitle_PK_ba();
		entity.endDate = domain.getEndDate().date();
		entity.startDate = domain.getStartDate().date();
		entity.jobName = domain.getJobName().v();
		entity.jobOutCode = domain.getJobOutCode().v();
		entity.meMo = domain.getMemo().v();
		return entity;
	}

	@Override
	public List<Position_ba> getAllPosition(String companyCode) {
		// TODO Auto-generated method stub
		return this.queryProxy().query(SELECT_ALL_BY_COMPANY, CmnmtJobTitle_ba.class)
				.setParameter(companyCode, companyCode).getList(d -> toDomain(d));
	}

	@Override
	public Optional<Position_ba> getSinglePosition(String companyCode, String jobCode) {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public void add(Position_ba position_ba) {
		// TODO Auto-generated method stub

	}

	@Override
	public void update(Position_ba position_ba) {
		// TODO Auto-generated method stub

	}

	@Override
	public void remove(Position_ba position_ba) {
		// TODO Auto-generated method stub

	}

}
