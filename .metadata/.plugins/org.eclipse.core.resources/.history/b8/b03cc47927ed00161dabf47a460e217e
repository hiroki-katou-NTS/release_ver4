module nts.uk.pr.view.cmm013.b.viewmodel {

    export class ScreenModel {

        dataSource: KnockoutObservableArray<ItemModel_GridList>;
        columns: KnockoutObservableArray<nts.uk.ui.NtsGridListColumn>;
        currentCode: KnockoutObservable<any>;
        currentCodeList: KnockoutObservableArray<any>;
        currentItem: KnockoutObservable<any>;
        constructor() {
            var self = this;
            
            self.dataSource = ko.observableArray([
                new ItemModel_GridList('A000001', '1基本給'),
                new ItemModel_GridList('A000002', '2基本給'),
                new ItemModel_GridList('A000003', '3基12本'),
                new ItemModel_GridList('A000004', '基12本'),
                new ItemModel_GridList('A000005', '基12本'),
                new ItemModel_GridList('A000006', '基12本'),
                new ItemModel_GridList('A000007', '基12本'),
                new ItemModel_GridList('A000008', '基12本'),
                new ItemModel_GridList('A000009', '基12本'),
                new ItemModel_GridList('A000010', '基12本')

            ]);
            self.columns = ko.observableArray([
                { headerText: 'コード', prop: 'code', width: 100 },
                { headerText: '名称', prop: 'name', width: 80 }
                
            ]);
            self.currentCode = ko.observable();
            self.currentCodeList = ko.observableArray([]);
            self.currentItem = ko.observable("");
            self.currentCode.subscribe((function(codeChanged) {
               self.currentItem(self.findObj(codeChanged));
                console.log(self.currentItem());
                }));
        }
        findObj(value: string): any{
            let self= this;
            let itemModel: ItemModel_GridList;
            _.find(self.dataSource(), function(obj: ItemModel_GridList){
                if(obj.code == value){
                    itemModel= obj;
                    }
                })
            return itemModel;
            }
        
        
    }

    



}