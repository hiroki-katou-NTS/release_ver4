<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:com="http://xmlns.jcp.org/jsf/component"
	xmlns:h="http://xmlns.jcp.org/jsf/html">
<head>
</head>
<body>

	<ui:composition template="../../../../master/base.xhtml">
		<ui:define name="htmlHead">
			<com:ValidatorScript>
					nts.uk.ctx.pr.core.dom.layout.LayoutName
				</com:ValidatorScript>
			<com:scriptfile set="IGNITE" />
			<com:scriptfile path="viewmodel.js" />
			<com:scriptfile path="start.js" />
			<com:scriptfile path="service.js" />
			<com:stylefile path="main.css" />
		</ui:define>

		<ui:define name="content">

			<div id="functions-area">
				<button data-bind="click: openGDialog">新規レイアウト</button>
				<button id="A_BTN_001" class="proceed"
					data-bind="click : registerLayout, enable: allowClick()">登録</button>
				<button id="A_BTN_003" data-bind="enable: allowClick()">Excel出力</button>
				<button id="A_BTN_004" data-bind="enable: allowClick()">マスタ修正ログ</button>
				<a id="A_BTN_005" href="#">計算式の登録へ</a> <a href="#">明細書の紐付けへ</a>
			</div>

			<div id="contents-area" class="cf">
				<div class="nts-left-content">
					<div class="form-label">
						<label>コード/名称</label> <input id="A_INP_001" type="text" />
						<button data-bind="click: searchLayout">検索</button>
					</div>
					<div>
						<button id="A_BTN_007"
							data-bind="click: openADialog, enable: allowClick()">履歴追加</button>
						<button id="A_BTN_008"
							data-bind="click: openEDialog, enable: allowClick()">履歴編集</button>
					</div>
					<div>
						<table id="treegrid2"
							data-bind="ntsTreeGridView:{
								   	width: 303,
									height: 500,
									options: itemList,
									value: singleSelectedCode,
									optionsValue: 'code',
									optionsChild: 'childs',
									optionsText: 'nodeText',
									multiple: false,
									enable: true,
									showCheckBox: false}"
							class="cf">
						</table>
					</div>
				</div>
				<div class="nts-right-content">
					<div>
						<div
							data-bind="ntsFormLabel: { constraint: 'LayoutName', required: true }">
							<label id="A_LBL_002">コード/名称</label>
						</div>
						<label id="A_LBL_003"
							data-bind="text: singleSelectedCode() === null ? '' : singleSelectedCode().split(';')[0]">01</label>
						<input id="A_INP_002" data-bind="value: layoutMaster().stmtName"
							type="text" /> <label id="A_LBL_004">（ レーザープリンター A4 縦向き
							最大３人 ）</label>
					</div>
					<div>
						<div data-bind="ntsFormLabel: {}">
							<label id="A_LBL_005">有効期間</label>
						</div>
						<label id="A_LBL_006" data-bind="text: startYm">2016/04</label> <label>
							~ </label> <label id="A_LBL_007" data-bind="text: endYm">9999/12</label>
					</div>
					<div>
						<div data-bind="ntsFormLabel: {}">
							<label id="A_LBL_008">現在使用行数 / 最大行数 </label>
						</div>
						<label id="A_LBL_009" data-bind="text: totalNormalLine">5行</label>
						<label id="A_LBL_010" data-bind="text: totalGrayLine">（+非表示1行）</label>
						<label> / </label> <label id="A_LBL_011">10行</label>
					</div>
					<div>
						<div data-bind="ntsFormLabel: { required: true }">
							<label id="A_LBL_012">明細書レイアウト</label>
						</div>
						<button id="A_BTN_009" data-bind="enable: allowClick()">印刷プレビュー</button>
					</div>
					<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

					<div data-bind="foreach: categories, visible: allowClick()">
						<div data-bind="attr: {id: 'group-' + categoryAtr}"
							class="group-root">
							<div id="group-title">
								<a class="button-setting"
									data-bind="visible: hasSetting, click: categoryClick"></a> <span
									data-bind="text: categoryName"></span>
							</div>
							<div class="all-line" data-bind="attr: {id: categoryAtr}">
								<div data-bind="foreach: lines">
									<div class="row"
										data-bind="attr: {
																	id: rowId, 
																	class: isDisplayOnPrint ? 'row' : 'row ground-gray'}">
										<div>
											<input type="button" class="button-setting"
												data-bind="enable: !hasRequiredItem, click: lineClick" />
										</div>
										<div data-bind="foreach: details">
											<span
												data-bind="click: itemClick, attr: {id: itemCode,
									            				class: isRequired() ? 'fixed-button ui-state-disabled li-on-row' : itemAbName() !== '+' ? 'button-with-text li-on-row' : 'li-on-row'}">
												<a data-bind="text: itemAbName"></a>
											</span>
										</div>
									</div>
								</div>
							</div>
							<div class="group-footer">
								<button data-bind="click: addLine">+行追加</button>
							</div>
						</div>
					</div>
					<button id="btnKintai" class="addCategoryButton"
						data-bind="click: addKintaiCategory, visible: notHasKintai">+
						勤怠エリアを追加する</button>
					<br />
					<button id="btnKiji" class="addCategoryButton"
						data-bind="click: addKijiCategory, visible: notHasKiji">+
						記事エリアを追加する</button>
					<!--             			 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
				</div>
			</div>
		</ui:define>
	</ui:composition>
</body>
</html>