<!DOCTYPE html>
<html>
<head>
<title>Test Page</title>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<link rel="stylesheet" type="text/css" href="lib/generic/jqueryui/jquery-ui.css" />
<link rel="stylesheet" type="text/css" href="lib/generic/igniteui/css/themes/infragistics/infragistics.theme.css" />
<link rel="stylesheet" type="text/css" href="lib/generic/igniteui/css/structure/infragistics.css" />
<link rel="stylesheet" type="text/css" href="lib/nittsu/ui/style/stylesheets/base.css" />
<link rel="stylesheet" type="text/css" href="lib/nittsu/ui/style/stylesheets/jquery.steps.css" />
<style>
a {
	color: #00B050;
	text-decoration: none;
}

h2 {
	color: #00B050;
	font-size: 25px;
	margin-bottom: 20px;
}

hr {
	margin: 25px 0;
}
note{position:relative;display:block;background:#ffc;box-shadow:1px 2px 3px 0px rgba(0,0,0,0.3);padding:20px;margin:20px auto;}
note:before{position:absolute;display:block;content:'';width:50px;height:15px;left:15px;top:-8px;background:rgba(255,255,255,0.35);box-shadow:0 0 2px 1px rgba(0,0,0,0.2), 0 0 1px 1px rgba(255,255,255,0.7) inset;transform: rotate(-8deg);}
</style>
<script src="./lib/generic/jquery/jquery-3.1.1.js"></script>
<script src="./lib/generic/jquery/jquery.steps.js"></script>
<script src="./lib/generic/jqueryui/jquery-ui.min.js"></script>
<script src="./lib/generic/knockoutjs/knockout-3.4.0.js"></script>
<script src="./lib/generic/knockoutjs/knockout.mapping-2.4.1.js"></script>
<script src="./lib/generic/lodash/lodash-4.16.6.min.js"></script>
<script src="./lib/generic/igniteui/js/infragistics.core.js"></script>
<script src="./lib/generic/igniteui/js/infragistics.lob.js"></script>
<script src="./lib/generic/igniteui/js/extensions/infragistics.ui.tree.knockout-extensions.js"></script>
<script src="./lib/generic/igniteui/js/extensions/infragistics.ui.combo.knockout-extensions.js"></script>
<script src="lib/nittsu/util.js"></script>
<script src="lib/nittsu/text.js"></script>
<script src="lib/nittsu/ui/notify.js"></script>
<script src="lib/nittsu/ui/validation.js"></script>
<script src="lib/nittsu/ui/jquery-ext.js"></script>
<script src="lib/nittsu/ui/ko-ext.js"></script>
<script src="lib/nittsu/ui/ui.js"></script>
<script src="lib/nittsu/iefix.js"></script>
<script>
	var __viewContext = __viewContext || {};
	__viewContext.primitiveValueConstraints = {
		CompanyCode: {
			valueType: "String",
			charType: "Numeric",
			maxLength: 4
		},
		CompanyName: {
			valueType: "String",
			charType: "Any",
			maxLength: 20
		}
	}
	__viewContext.system = {
		kinjirou:false,
		installationType:1,
		systemName:'ヘルスケアシステム',
		programName:'会社情報登録',
		releaseVersion:'2016.10.18',
		requestId:'38f66a0f-7b9b-43de-8cb6-7d9a8874ee9f',
		programId:'MnComp0102'
	};
	__viewContext.user = {
		isDepartmentManager:false,
		isConsumer:false,
		isStressCheckConductor:false,
		isEmployee:false,
		isIndustrialPhysician:false,
		isSystemAdministrator:false,
		isCompanyManager:true,
		companyName:'契約Ａ会社１',
		isCompanyUser:true,
		isPersonnelManageOfficer:false,
		userName:'テストログイン',
		isSpecialUser:false
	};
	__viewContext.companySettings = {
		isSeparate:true,
		showEmployment:false,
		exporting:0,
		showWorkPlace:false,
		sorting:3,
		showPosition:true,
		showDepartment:true
	};
</script>
<script>
		var vm;
		$(function () {
			vm = {
				companyCode: ko.observable('0001'),
				companyName: ko.observable('てすと会社'),
				// TextBox ViewModel
				textbox: {
					value: ko.observable("test"),
					constraint: 'CompanyCode'
				},
				// SwitchButton ViewModel
				switchbutton: {
					roundingRules: ko.observableArray([
						{ code: '1', name: '四捨五入' },
						{ code: '2', name: '切り上げ' },
						{ code: '3', name: '切り捨て' }
					]),
					selectedRuleCode: ko.observable('1')
				},
				// CheckBox ViewModel
				checkbox: {
					// Check box test.
					isHealthInsurance: ko.observable(true),
					isEnable:  ko.observable(true),
				},
				multicheckbox: {
					boxes: ko.observableArray([
						new BoxModel(1, 'box 1'), new BoxModel(2, 'box 2'), new BoxModel(3, 'box 3')
					]),
					selectedBoxes: ko.observableArray([])
				},
				// ComboBox ViewModel
				combobox: {
					itemList: ko.observableArray([
						new ItemModel('基本給1', '基本給'),
						new ItemModel('基本給2', '役職手当'),
						new ItemModel('0003', '基本給')
					]),
					itemName: ko.observable(''),
					currentCode: ko.observable(3),
					selectedCode: ko.observable(''),
					isEnable: ko.observable(true),
					isEditable: ko.observable(true),
					addOptions: function () {
						var self = this;
						var newCode = self.currentCode() + 1;
						var itemCode = newCode.toString();
						var codeLength = itemCode.length;
						while (codeLength < 4) {
							itemCode = '0' + itemCode;
							codeLength++;
						}
						self.itemList.push(new ItemModel(itemCode, self.itemName()));
						self.currentCode(newCode);
					},
					clearOptions: function () {
						this.itemList([]);
					},
					removeByCode: function () {
						var self = this;
						var selected = self.itemList().filter(function (item) { return item.code == self.selectedCode(); })[0];
						self.itemList.remove(selected);
					}
				},
			 	// ListBox ViewModel
				listbox: {
					itemList: ko.observableArray([
						new ItemModel('基本給2', '基本給', "Test dest 1"),
						new ItemModel('基本給1', '役職手当', "Test dest 2"),
						new ItemModel('基本給3', '基本給', "Test dest 3")
					]),
					itemName: ko.observable(''),
					currentCode: ko.observable(3),
					selectedCode: ko.observable(null),
					isEnable: ko.observable(true),
					selectedCodes: ko.observableArray([]),
					addOptions: function () {
						var self = this;
						var newCode = self.currentCode() + 1;
						var itemCode = newCode.toString();
						var codeLength = itemCode.length;
						while (codeLength < 4) {
							itemCode = '0' + itemCode;
							codeLength++;
						}
						self.itemList.push(new ItemModel(itemCode, self.itemName(), ""));
						self.currentCode(newCode);
					},
					deselectAll: function () {
						$('#list-box').ntsListBox('deselectAll');
					},
					selectAll: function () {
						$('#list-box').ntsListBox('selectAll');
					},
					clearOptions: function () {
						this.itemList([]);
					},
					remove: function () {
						var self = this;
						var selected = self.itemList().filter(function (item) { return item.code == self.selectedCode(); })[0];
						self.itemList.remove(selected);
						var selecteds = self.itemList().filter(function (item) { return self.selectedCodes().indexOf(item.code) != -1; });
						self.itemList.removeAll(selecteds);
					}
				},
			 	// TreeGrid ViewModel
				treegrid: {
					items1: ko.observableArray([new Node('0001', 'サービス部', [
						new Node('0001-1', 'サービス部1', []),
						new Node('0001-2', 'サービス部2', []),
						new Node('0001-3', 'サービス部3', [])
					]), new Node('0002', '開発部', [])]),
					items2: ko.observableArray([new Node('0001', 'サービス部', [
						new Node('0001-1', 'サービス部1', []),
						new Node('0001-2', 'サービス部2', []),
						new Node('0001-3', 'サービス部3', [])
					]), new Node('0002', '開発部', [])]),
					headers: ko.observableArray(["Item Value Header","Item Text Header", "Auto generated Field"]),
					selectedCode: ko.observableArray([]),
					singleSelectedCode: ko.observable(null),
					index: 0,
					resetSelection: function () {
						var self = this;
						self.items1([new Node('0001', 'サービス部', [
								new Node('0001-1', 'サービス部1', []),
								new Node('0001-2', 'サービス部2', []),
								new Node('0001-3', 'サービス部3', [])
							]), new Node('0002', '開発部', [])]);
						self.items2([new Node('0001', 'サービス部', [
							new Node('0001-1', 'サービス部1', []),
							new Node('0001-2', 'サービス部2', []),
							new Node('0001-3', 'サービス部3', [])
						]), new Node('0002', '開発部', [])]);
						self.singleSelectedCode('0002');
						self.selectedCode(['0001-1', '0002']);
					},
					changeDataSource: function () {
						var self = this;
						var i = 0;
						var newArrays = new Array();
						while (i < 50) {
							self.index++;
							i++;
							newArrays.push(new Node(self.index.toString(), 'Name ' + self.index.toString(), []));
						};
						self.items1(newArrays);
						self.items2(newArrays);
					}
				}
			};
			
			//checkbox item
			function BoxModel(id,name) {
				this.id = ko.observable(id);
				this.name = ko.observable(name);
			}
			
			// ListBox & ComboBox Item
			function ItemModel(code, name, dest) {
				this.code = code;
				this.name = name;
				this.dest = dest;
			}
			
			// TreeGrid Node
			function Node(code, name, childs) {
				this.code = code;
				this.name = name;
				this.nodeText = code + ' ' + name;
				this.childs = childs;
				this.custom = 'Random' + new Date().getTime();
			}
			
            $('.ntsRadioBox').on('click', function() {
                if ($(this).hasClass('disabled'))
                    return;
                $(this).find('input[type=radio]').prop("checked", true);
            });
			
			ko.applyBindings(vm);
			
		});
	</script>
</head>
<body>
	<note style="width: 500px;"><b style="font-weight:bold;">SEX!!!</b><br/>
	Mọi sample đã được chuyển qua trang:<br/>
	<a href="http://localhost:8080/nts.uk.pr.web/view/sample/catalog.xhtml">http://localhost:8080/nts.uk.pr.web/view/sample/catalog.xhtml</a><br/>
	</note>
	<div>てすとぺーじ</div>
	会社コード：
	<input type="text"
		data-bind="ntsTextBox: { value: companyCode, constraint: 'CompanyCode' }" />
	<br /> 会社名：
	<input type="text"
		data-bind="ntsTextBox: { value: companyName, constraint: 'CompanyName' }" />
	<br />
	<hr />
	<div data-bind="with: textbox">
		<h2>
			<a href="view/sample/editor/editor.xhtml">&#9655; Editor Sample</a>
		</h2>
	</div>
	<hr />
	<h2>
		<a href="view/sample/dialog/dialog.xhtml">&#9655; Dialog Sample</a>
	</h2>
	<hr />
	<h2>
		<a href="view/sample/grid/ignite-grid.html">&#9655; Grid Sample</a>
	</h2>
	<hr />
	<div data-bind="with: switchbutton">
		<h2>Switch Button</h2>
		<div id="switchButtonTest"
			data-bind="ntsSwitchButton: {
				options: roundingRules,
				optionsValue: 'code',
				optionsText: 'name',
				value: selectedRuleCode }"
			class="cf"></div>
	</div>
	<hr />
	<div data-bind="with: checkbox">
		<h2>CheckBox</h2>
		<div style="background:#2ecc71;padding:5px;margin:5px 0;"><div id="checkBoxTest1"
			data-bind="ntsCheckBox: { checked: isHealthInsurance, text: 'Txt_HealthInsurance', enable: isEnable }"
			class="cf outline"></div></div>
		<div id="checkBoxTest2" data-bind="ntsCheckBox: { checked: isEnable}"
			class="cf">This is test text for enable</div>
		Your selected state:
		<div data-bind="text: isHealthInsurance"></div>
		<!-- Test theme -->
		<div style="background:#2ecc71;padding:5px;margin:5px 0;"><span class="outline ntsRadioBox"><input type="radio" name="testradio"/><label><span></span>Enable</label></span></div>
		<span class="ntsRadioBox"><input type="radio" name="testradio"/><label><span></span>Enable</label></span>
		<span class="ntsRadioBox"><input type="radio" name="testradio"/><label><span></span>Enable</label></span>
	</div>
	<hr />
	<div data-bind="with: combobox">
		<h2>ComboBox</h2>
		<div>
			<input data-bind="value: itemName"></input>
			<button data-bind="click: addOptions">Add Item</button>
		</div>
		<br />
		<div id="combo-box"
			data-bind="ntsComboBox: {options: itemList,
							optionsValue: 'code',
							value: selectedCode,
							optionsText: 'name',
							editable: isEditable(),
							enable: isEnable(),
							columns: [
								{ prop: 'code', length: 4 },
								{ prop: 'name', length: 10 },
							]}"
			class="cf"></div>
		<button data-bind="click: removeByCode">Remove Item</button>
		<br />

		<div class="status">
			<label><input type="checkbox" data-bind="checked: isEnable" />Enable</label>
			<label><input type="checkbox" data-bind="checked: isEditable" />Editable</label>
		</div>
		<div>
			Your selected code: <span data-bind="text:selectedCode"></span>
		</div>
	</div>
	<hr />
	<div data-bind="with: listbox">
		<h2>ListBox</h2>
		<div>
			<input data-bind="value: itemName"></input>
			<button data-bind="click: addOptions">Add Item</button>
		</div>
		<br />
		<div id="list-box"
			data-bind="ntsListBox: {options: itemList,
							optionsValue: 'code',
							optionsText: 'name',
							multiple: true,
							value: selectedCodes,
							enable: isEnable(),
							rows: 3,
							columns: [
								{ prop: 'code', length: 4 },
								{ prop: 'name', length: 10 },
								{ prop: 'dest', length: 10 }
							]}"
			class="cf"></div>
		<button data-bind="click: remove">Remove Item</button>
		<button data-bind="click: selectAll">Select All</button>
		<button data-bind="click: deselectAll">Deselect All</button>
		<br />
		<!-- Multiple is false -->
		<span data-bind="text: selectedCode()"></span>
		<!-- Multiple is true -->
		<span data-bind="text: selectedCodes()"></span> <br />
		<span data-bind="text: selectedCodes().length"></span> <br />
		 <label
			class="status"> <input type="checkbox"
			data-bind="checked: isEnable">Enable
		</label>
	</div>
	<hr />
	<div data-bind="with: treegrid" class="cf">
		<div style="float: left; margin-right: 15px;">
			<h2>TreeGrid Multi Selection</h2>
			<table id="treegrid"
				data-bind="ntsTreeGridView:{
					width: 500,
					height: 500,
					options: items1,
					
					selectedValues: selectedCode,
					optionsValue: 'code',
					optionsChild: 'childs',
					optionsText: 'nodeText',
					multiple: true,
					enable: true,
					extColumns: [{headerText: headers()[2], key: 'custom', width: '150px', dataType: 'string'}],
					showCheckBox: true}"
				class="cf">
			</table>
		</div>
		<div style="float: left; margin-right: 15px;">
			<h2>TreeGrid Single Selection</h2>
			<table id="treegrid2"
				data-bind="ntsTreeGridView:{
					width: 700,
					height: 500,
					options: items2,
					value: singleSelectedCode,
					headers: headers,
					optionsValue: 'code',
					optionsChild: 'childs',
					optionsText: 'nodeText',
					multiple: false,
					enable: true,
					extColumns: [{headerText: headers()[2], key: 'custom', width: '150px', dataType: 'string'}],
					showCheckBox: false}"
				class="cf">
			</table>
			<!-- extColums is optional -->
		</div>
		<!-- <div style="float: left; margin-right: 15px;">
			<h2>test</h2>
			<table id="treegrid3"
				data-bind="ntsTreeGridView:{
					width: 700,
					height: 500,
					options: items2,
					value: singleSelectedCode,
					headers: headers,
					optionsValue: 'code',
					optionsChild: 'childs',
					optionsText: 'nodeText',
					multiple: false,
					enable: true,
					showCheckBox: true}"
				class="cf">
			</table>
		</div>-->
		<div style="float: left">
			Your multiple selected code:
			<!-- ko foreach: selectedCode -->
			<div data-bind="text: $data"></div>
			<!-- /ko -->
			<br />
			<button data-bind="click: resetSelection">Reset</button>
			<button data-bind="click: changeDataSource">Next Datasource</button>

			<br /> <br /> Your single selected code:
			<div data-bind="text: singleSelectedCode"></div>
			<br />
		</div>
	</div>
	<hr />
	<div class="cf" data-bind="with: multicheckbox">
		  <h2>Multi Check Box Custom Bindings</h2>
		  <div style="float: left; margin-right: 25px">
			  <strong>List of Boxes</strong>
			  <div data-bind="foreach: boxes">
				  <div data-bind="ntsMultiCheckBox: {isChecked: $parent.selectedBoxes, content: name, item: $data}">
				  </div>
				  <br/>
			  </div>
		  </div>
		  <p> You've selected</p>
		  <div style="float: left" data-bind="foreach: selectedBoxes">
			  <p><span data-bind="text: id"></span></p>
		  </div>
	</div>
	<hr />
	<h2><a href="view/sample/wizard/wizard.xhtml">&#9655; Wizard Sample</a></h2>
	<br/><br/><br/>
</body>
</html>
