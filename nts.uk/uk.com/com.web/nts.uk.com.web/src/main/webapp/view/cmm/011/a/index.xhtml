<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:com="http://xmlns.jcp.org/jsf/component"
	xmlns:h="http://xmlns.jcp.org/jsf/html">
<body>
	<ui:composition template="../../../../master/base.xhtml">
		<ui:define name="htmlHead">

			<com:ValidatorScript>
				nts.uk.ctx.bs.employee.dom.workplace.info.WkpCode
				nts.uk.ctx.bs.employee.dom.workplace.info.OutsideWorkplaceCode
				nts.uk.ctx.bs.employee.dom.workplace.info.WorkplaceName
				nts.uk.ctx.bs.employee.dom.workplace.info.WorkplaceDisplayName
				nts.uk.ctx.bs.employee.dom.workplace.info.WorkplaceGenericName
			</com:ValidatorScript>

			<com:scriptfile set="IGNITE" />

			<com:stylefile path="style.css" />
			<com:scriptfile path="../_base/cmm011.base.js" />
			<com:scriptfile path="cmm011.a.service.js" />
			<com:scriptfile path="cmm011.a.vm.js" />
			<com:scriptfile path="cmm011.a.start.js" />
		</ui:define>

		<!-- PAGE CONTENT -->
		<ui:define name="content">
			<div id="functions-area">

				<!-- BEGIN A1_1 ~ A1_3 -->
				<button tabindex="2"
					data-bind="click: createWkpDialog,
						enable: isNewMode() ? false : isWkpConfigHistLatest">
					#{i18n.getText('CMM011_5')}</button>
				<button class="proceed" tabindex="1"
					data-bind="click: saveWorkplace,
					enable:  (isNewMode() ? isSelectedWpkId() : isWkpConfigHistLatest()) &amp;&amp; $root.errors.isEmpty">#{i18n.getText('CMM011_6')}</button>
				<button class="danger" tabindex="3"
					data-bind="click: removeWorkplace,
					enable: isNewMode() ? false : isWkpConfigHistLatest"
					style="margin-left: 200px;">#{i18n.getText('CMM011_7')}</button>
				<!-- END A1_1 ~ A1_3 -->
			</div>
			<div id="contents-area">
				<div id="left-content">

					<!-- BEGIN A2_1 ~ A2_6 -->
					<div id="left-content-top"
						class="bg-green caret-bottom caret-inline caret-background">
						<div class="cf">
							<div data-bind="ntsFormLabel: {}">#{i18n.getText('CMM011_2')}</div>
							<span data-bind="text: strDWorkplace"></span> <label
								style="margin-left: 8px; margin-right: 8px;">#{i18n.getText('CMM011_26')}</label>
							<span data-bind="text: endDWorkplace"></span>
							<button class="pull-right" tabindex="6"
								data-bind="click: openWkpConfigDialog">#{i18n.getText('CMM011_21')}</button>
						</div>
					</div>
					<!-- END A2_1 ~ A2_6 -->

					<!-- BEGIN A3_1 ~ A4_4 -->
					<div id="left-content-bottom"
						class="caret-right caret-background bg-green"
						data-bind="with: treeWorkplace">
						<i class="icon icon-searchbox"></i>
						<div tabindex="7"
							data-bind=" ntsSearchBox: {
							targetKey: 'workplaceId',
							mode: 'igTree',
							comId: 'single-tree-grid',
							items: lstWorkplace, 
							selected: selectedWpkId,
							selectedKey: 'workplaceId',
							childField: 'childs',
							fields: ['name', 'code']}"
							style="width: 280px;"></div>

						<div tabindex="8">
							<table id="single-tree-grid" class="cf"
								data-bind="ntsTreeGridView:{
								width: treeStyle.width,
								height: treeStyle.height,
								name: '#[CMM011_8]',
								dataSource: lstWorkplace,
								value: selectedWpkId,
								primaryKey: 'workplaceId',
								childDataKey: 'childs',
								primaryText: 'nodeText',
								multiple: false,
								enable: true,
								extColumns: treeColumns,
								showCheckBox: false}">
							</table>
						</div>
					</div>
					<!-- END A3_1 ~ A4_4 -->
				</div>

				<!-- BEGIN A5_1 ~ A_10_2 -->
				<div id="right-content">
					<table id="table-detail-setting">
						<col width="150"></col>
						<col width="260"></col>
						<col width="150"></col>
						<col width="160"></col>

						<!-- BEGIN A5_1 ~ A_5_5 -->
						<tr data-bind="with: workplaceHistory">
							<td class="first-row" style="vertical-align: top;"><div
									data-bind="ntsFormLabel: {}">#{i18n.getText('Com_Workplace')}</div></td>
							<td><div id="list-box" tabindex="9"
									data-bind="ntsListBox: {
								options: lstWpkHistory,
								optionsValue: 'historyId',
								optionsText: 'textDisplay',
								multiple: false,
								value: selectedHistoryId,
								enable: true,
								rows: 4,
								columns: [
									{ key: 'textDisplay', length: 15 }
								]}"></div></td>
							<td>
								<div style="margin-top: -4px;">
									<button tabindex="10"
										data-bind="click: addWkpHistoryDialog,
									enable: $parent.isNewMode() ? false : $parent.isWkpHistoryLatest">#{i18n.getText('CMM011_10')}</button>
								</div>
								<div style="margin-top: 8px;">
									<button tabindex="11"
										data-bind="click: updateWkpHistoryDialog,
									enable: $parent.isNewMode() ? false : $parent.isWkpHistoryLatest">#{i18n.getText('CMM011_11')}</button>
								</div>
								<div style="margin-top: 8px;">
									<button tabindex="12"
										data-bind="click: deleteWkpHistory,
									enable: $parent.isNewMode() ? false : $parent.isWkpHistoryLatest">#{i18n.getText('CMM011_12')}</button>
								</div>
							</td>
							<td></td>
						</tr>
						<!-- END A5_1 ~ A_5_5 -->

						<!-- BEGIN ROW EMPTY -->
						<tr>
							<td class="td-detail"></td>
						</tr>
						<!-- END ROW EMPTY -->

						<!-- BEGIN A6_1 ~ A7_2 -->
						<tr>
							<td class="td-detail"><div
									data-bind="ntsFormLabel: {required: true, constraint: 'WkpCode'}">
									#{i18n.getText('CMM011_13')}</div></td>
							<td><div>
									<input id="wkpCd" tabindex="13"
										data-bind="ntsTextEditor: {
											value: workplaceCode,
											name: '#[CMM011_13]',
											constraint: 'WkpCode',
											option: {
												width: '100px',
											},
											required: true,
											enable: isNewMode() &amp;&amp; isSelectedWpkId()}" />
								</div></td>
							<td><div
									data-bind="ntsFormLabel: {constraint: 'OutsideWorkplaceCode'}">
									#{i18n.getText('CMM011_14')}</div></td>
							<td><div>
									<input tabindex="14"
										data-bind="ntsTextEditor: {
											value: externalCode,
											name: '#[CMM011_14]',
											constraint: 'OutsideWorkplaceCode',
											option: {
												width: '100px',
											},
											required: false,
											enable: isNewMode() ? true  &amp;&amp; isSelectedWpkId() : isWkpHistoryLatest}" />
								</div></td>
						</tr>
						<!-- END A6_1 ~ A7_2 -->

						<!-- BEGIN A81_1 ~ A8_2 -->
						<tr>
							<td class="td-detail"><div
									data-bind="ntsFormLabel: {required: true, constraint: 'WorkplaceName'}">
									#{i18n.getText('CMM011_15')}</div></td>
							<td><div>
									<input id="wkpName" tabindex="15"
										data-bind="ntsTextEditor: {
											value: workplaceName,
											name: '#[CMM011_15]',
											constraint: 'WorkplaceName',
											option: {
												width: '150px',
											},
											required: true,
											enable: isNewMode() ? true &amp;&amp; isSelectedWpkId() : isWkpHistoryLatest}" />
								</div></td>
							<td></td>
							<td></td>
						</tr>
						<!-- END A81_1 ~ A8_2 -->

						<!-- BEGIN A9_1 ~ A9_2 -->
						<tr>
							<td class="td-detail"><div
									data-bind="ntsFormLabel: {required: true, constraint: 'WorkplaceDisplayName'}">
									#{i18n.getText('CMM011_16')}</div></td>
							<td colspan="2"><div>
									<input id="wkpDisplayName" tabindex="16"
										data-bind="ntsTextEditor: {
											value: wkpDisplayName,
											name: '#[CMM011_16]',
											constraint: 'WorkplaceDisplayName',
											option: {
												width: '360px',
											},
											required: true,
											enable: isNewMode() ? true &amp;&amp; isSelectedWpkId() : isWkpHistoryLatest}" />
								</div></td>
							<td></td>
						</tr>
						<!-- END A9_1 ~ A9_2 -->

						<!-- BEGIN A10_1 ~ A10_2 -->
						<tr>
							<td class="td-detail"><div
									data-bind="ntsFormLabel: {required: true, constraint: 'WorkplaceGenericName'}">
									#{i18n.getText('CMM011_17')}</div></td>
							<td colspan="4"><div>
									<input id="wkpFullName" tabindex="17"
										data-bind="ntsTextEditor: {
											value: wkpFullName,
											name: '#[CMM011_17]',
											constraint: 'WorkplaceGenericName',
											option: {
												width: '512px',
											},
											required: true,
											enable: isNewMode() ? true &amp;&amp; isSelectedWpkId() : isWkpHistoryLatest}" />
								</div></td>
							<td></td>
						</tr>
						<!-- END A10_1 ~ A10_2 -->
					</table>
				</div>
				<!-- END A5_1 ~ A_10_2 -->
			</div>
		</ui:define>
	</ui:composition>
</body>
</html>