<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:com="http://xmlns.jcp.org/jsf/component"
	xmlns:h="http://xmlns.jcp.org/jsf/html">
<body>
	<ui:composition template="../../../../master/base.xhtml">
		<ui:define name="htmlHead">
			<com:ValidatorScript>
				nts.uk.ctx.bs.person.dom.person.role.RoleName
			</com:ValidatorScript>
			<com:stylefile path="cas001.a.style.css" />
			<com:scriptfile set="IGNITE" />
			<com:scriptfile
				path="/lib/generic/igniteui/js/extensions/infragistics.datasource.knockoutjs.js"
				of="/nts.uk.com.js.web" />
			<com:scriptfile
				path="/lib/generic/igniteui/js/extensions/infragistics.ui.grid.knockout-extensions.js"
				of="/nts.uk.com.js.web" />
			<com:scriptfile path="cas001.a.start.js" />
			<com:scriptfile path="cas001.a.service.js" />
			<com:scriptfile path="cas001.a.vm.js" />
		</ui:define>

		<ui:define name="content">
			<div id="functions-area">
				<div class="container">
					<!-- <button id="A1_001">#{i18n.getText('CAS001_2')}</button> -->
					<button id="A1_002" class="proceed" data-bind="click:saveData">#{i18n.getText('CAS001_3')}</button>
					<button id="A1_003"
						data-bind="click:OpenCModal,enable:(personRoleList().length &gt; 0)">#{i18n.getText('CAS001_4')}</button>
					<!-- 	<button id="A1_004" class="danger">#{i18n.getText('CAS001_5')}</button> -->
					<div class="float-right">
						<a id="A1_005" class="goout " data-bind="ntsLinkButton: { }">#{i18n.getText('CAS001_6')}</a>
					</div>
				</div>
			</div>
			<div id="contents-area" class="cf">
				<div id="content-left" class="bg-green">
					<div style="margin-left: 15px;">
						<table id="A2_001"
							data-bind="ntsGridList: {		
						showNumbering:true,
						dataSource: personRoleList ,
						primaryKey: 'roleId' ,
						columns: [
						{ headerText: '#{i18n.getText('CAS001_8')}', key: 'roleId', width: 50, hidden : true},
						{ headerText: '#{i18n.getText('CAS001_8')}', key: 'roleCode', width: 50},
				        { headerText: '#{i18n.getText('CAS001_9')}', key: 'roleName', width: 120 } ] ,
						multiple: false,
						value: currentRoleId,
						rows:5 }">
						</table>
					</div>
					<span id="A2_001Caret" class="caret-bottom outline"></span>
					<div>
						<div style="width: 270px" id="A2_007"
							data-bind="ntsSearchBox: {
							searchMode: 'filter',
							targetKey: 'categoryId',
						 	comId: 'A2_008',
						 	items: RoleCategoryList,
						 	selected: currentCategoryId,
						 	selectedKey: 'categoryId',
						 	fields: ['categoryName'],
						 	mode: 'igGrid'}" />
						<table id="A2_008"
							data-bind="ntsGridList: {	
						dataSource: RoleCategoryList ,
						primaryKey: 'categoryId' ,
						columns: [{ headerText: 'コード', key: 'categoryId', width: 200 ,hidden:true},
								{ headerText: '#{i18n.getText('CAS001_10')}', key: 'categoryName', width: 165},
				                {headerText: '#{i18n.getText('CAS001_69')}', key: 'setting', width: 80 , formatter :makeIcon } ] ,
						multiple: false,
						value: currentCategoryId ,
						rows:10 }">
						</table>
					</div>
				</div>
				<div id="content-right">
					<div id="roleConfigArea" data-bind="with:currentRole">

						<div class="div_line" style="margin-top: 0px;">
							<div class="line_col_1 display_flex">
								<div
									data-bind="ntsFormLabel: { required:true,constraint:'RoleName' }">#{i18n.getText('CAS001_12')}</div>
								<span id="A3_002" data-bind="text:roleCode"></span> <span
									id="A3_003" data-bind="text:roleName"></span>
							</div>
							<div class="line_col_2" data-bind="with:$parent">
								<button id="A3_004" data-bind="click:OpenDModal">#{i18n.getText('CAS001_13')}</button>
							</div>
						</div>
						<div class="div_line">
							<div id="role_auth_cover">
								<div data-bind="ntsAccordion: {active:0 }">
									<h3>#{i18n.getText('CAS001_14')}</h3>
									<div>
										<table id="roleAuTable" class="auth_table">
											<tr>
												<th></th>
												<th style="width: 150px">#{i18n.getText('CAS001_18')}</th>
												<th style="width: 150px">#{i18n.getText('CAS001_19')}</th>
											</tr>
											<tr>
												<th>#{i18n.getText('CAS001_15')}</th>
												<td><div id="A3_012" class="cf"
														data-bind="ntsSwitchButton: {
													options: $parent.roundingRules,
													optionsValue: 'code',
													optionsText: 'name',
													value: allowMapUpload,
													enable: true }"></div>
												</td>
												<td>
													<div id="A3_013" class="cf"
														data-bind="ntsSwitchButton: {
													options: $parent.roundingRules,
													optionsValue: 'code',
													optionsText: 'name',
													value:  allowMapBrowse,
													enable: true }"></div>
												</td>
											</tr>
											<tr>
												<th>#{i18n.getText('CAS001_16')}</th>
												<td><div id="A3_014" class="cf"
														data-bind="ntsSwitchButton: {
													options: $parent.roundingRules,
													optionsValue: 'code',
													optionsText: 'name',
													value: allowDocUpload ,
													enable: true }"></div>
												</td>
												<td>
													<div id="A3_015" class="cf"
														data-bind="ntsSwitchButton: {
													options: $parent.roundingRules,
													optionsValue: 'code',
													optionsText: 'name',
													value: allowDocRef ,
													enable: true }"></div>
												</td>
											</tr>
											<tr>
												<th>#{i18n.getText('CAS001_17')}</th>
												<td><div id="A3_016" class="cf"
														data-bind="ntsSwitchButton: {
													options: $parent.roundingRules,
													optionsValue: 'code',
													optionsText: 'name',
													value: allowAvatarUpload ,
													enable: true }"></div>
												</td>
												<td>
													<div id="A3_017" class="cf"
														data-bind="ntsSwitchButton: {
													options: $parent.roundingRules,
													optionsValue: 'code',
													optionsText: 'name',
													value: allowAvatarRef ,
													enable: true }"></div>
												</td>
											</tr>
										</table>

									</div>
								</div>
							</div>
							<hr />
						</div>
						<!-- 	category area -->
						<div id="category_config_arena" data-bind="with:currentCategory">
							<div class="div_line">
								<div class="line_col_1">
									<div id="A4_001" data-bind="ntsFormLabel: { required:true }">#{i18n.getText('CAS001_21')}</div>
									<span id="A4_002" class="padding_left_20"
										data-bind="text:categoryName"></span>
								</div>
								<div class="line_col_2">
									<div id="A4_003" data-bind="ntsFormLabel: { required:true }">#{i18n.getText('CAS001_22')}</div>
									<span id="A4_004" class="padding_left_20"
										data-bind="text:categoryType"></span>
								</div>
							</div>
							<div class="div_line">
								<div id="file_permission_settings_cover">
									<div data-bind="ntsAccordion: {active:0 }">
										<h3>#{i18n.getText('CAS001_23')}</h3>
										<div>
											<div id="file_permission_settings">
												<div>
													<span id="A4_007">#{i18n.getText('CAS001_24')}</span>
													<div id="A4_008" class="cf margin_left_10"
														data-bind="ntsSwitchButton: {
													options:  $parents[1].roundingRules,
													optionsValue: 'code',
													optionsText: 'name',
													value: $parents[1].allowOtherRef ,
													enable: true }"></div>
												</div>
												<div>
													<span id="A4_009">#{i18n.getText('CAS001_26')} </span>
													<div id="A4_010" class="cf margin_left_10"
														data-bind="ntsSwitchButton: {
													options:  $parents[1].roundingRules,
													optionsValue: 'code',
													optionsText: 'name',
													value: $parents[1].allowPersonRef ,
													enable: true }"></div>
												</div>
												<com:ko-if bind="categoryType === 3">
													<div>
														<span id="A4_011">#{i18n.getText('CAS001_28')}</span>
														<div id="A4_012" class="cf margin_left_10"
															data-bind="ntsSwitchButton: {
													options:  $parents[1].roundingRules,
													optionsValue: 'code',
													optionsText: 'name',
													value: allowOtherCompanyRef ,
													enable: true }"></div>
													</div>
												</com:ko-if>
											</div>
											<div id="auth_group_table">
												<com:ko-if bind="categoryType === 2">
													<table id="multi_auth_table" class="auth_table">
														<tr>
															<th></th>
															<th style="width: 150px;">#{i18n.getText('CAS001_40')}</th>
															<th style="width: 150px;">#{i18n.getText('CAS001_41')}</th>
														</tr>
														<tr>
															<th>#{i18n.getText('CAS001_30')}</th>
															<td><div id="A4_033" class="cf"
																	data-bind="ntsSwitchButton: {
													options:  $parents[1].roundingRules,
													optionsValue: 'code',
													optionsText: 'name',
													value: selfAllowDelMulti ,
													enable: $parents[1].allowPersonRef() === 1 }"></div></td>
															<td><div id="A4_034" class="cf"
																	data-bind="ntsSwitchButton: {
													options:  $parents[1].roundingRules,
													optionsValue: 'code',
													optionsText: 'name',
													value: selfAllowAddMulti ,
													enable: $parents[1].allowPersonRef() === 1 }"></div></td>
														</tr>
														<tr>
															<th>#{i18n.getText('CAS001_31')}</th>
															<td><div id="A4_035" class="cf"
																	data-bind="ntsSwitchButton: {
													options:  $parents[1].roundingRules,
													optionsValue: 'code',
													optionsText: 'name',
													value: otherAllowDelMulti ,
													enable: $parents[1].allowOtherRef()===1 }"></div></td>
															<td><div id="A4_036" class="cf"
																	data-bind="ntsSwitchButton: {
													options:  $parents[1].roundingRules,
													optionsValue: 'code',
													optionsText: 'name',
													value: otherAllowAddMulti ,
													enable: $parents[1].allowOtherRef()===1 }"></div></td>
														</tr>
													</table>
												</com:ko-if>
												<com:ko-if bind="categoryType === 3">
													<table id="history_auth_table" class="auth_table">
														<tr>
															<th></th>
															<th style="width: 150px;">#{i18n.getText('CAS001_32')}</th>
															<th style="width: 150px;">#{i18n.getText('CAS001_33')}</th>
															<th style="width: 150px;">#{i18n.getText('CAS001_34')}</th>
															<th style="width: 150px;">#{i18n.getText('CAS001_35')}</th>
														</tr>
														<tr>
															<th>#{i18n.getText('CAS001_30')}</th>
															<td><div id="A4_024" class="cf"
																	data-bind="ntsSwitchButton: {
													options:  $parents[1].roundingRules,
													optionsValue: 'code',
													optionsText: 'name',
													value: otherAllowAddHis ,
													enable: $parents[1].allowOtherRef()===1 }"></div></td>
															<td><div id="A4_025" class="cf"
																	data-bind="ntsSwitchButton: {
													options:  $parents[1].roundingRules,
													optionsValue: 'code',
													optionsText: 'name',
													value:  otherAllowDelHis,
													enable: $parents[1].allowOtherRef()===1 }"></div></td>
															<td><div id="A4_026"
																	data-bind="ntsComboBox: {
														options: $parents[1].itemListCbb,
														optionsValue: 'code',
														value: otherFutureHisAuth ,
														optionsText: 'name',
														editable: false,
														enable: $parents[1].allowOtherRef()===1 ,
														columns: [
															{ prop: 'name', length: 5 },
														]}"></div></td>
															<td><div id="A4_027"
																	data-bind="ntsComboBox: {
														options: $parents[1].itemListCbb,
														optionsValue: 'code',
														value: otherPastHisAuth ,
														optionsText: 'name',
														editable: false,
														enable: $parents[1].allowOtherRef()===1 ,
														columns: [
															{ prop: 'name', length: 5 },
														]}"></div></td>
														</tr>
														<tr>
															<th>#{i18n.getText('CAS001_31')}</th>
															<td><div id="A4_020" class="cf"
																	data-bind="ntsSwitchButton: {
													options:  $parents[1].roundingRules,
													optionsValue: 'code',
													optionsText: 'name',
													value:  selfAllowAddHis,
													enable: $parents[1].allowPersonRef() === 1 }"></div></td>
															<td><div id="A4_021" class="cf"
																	data-bind="ntsSwitchButton: {
													options:  $parents[1].roundingRules,
													optionsValue: 'code',
													optionsText: 'name',
													value: selfAllowDelHis ,
													enable: $parents[1].allowPersonRef() === 1 }"></div></td>
															<td><div id="A4_022"
																	data-bind="ntsComboBox: {
														options: $parents[1].itemListCbb,
														optionsValue: 'code',
														value:  selfFutureHisAuth,
														optionsText: 'name',
														editable: false,
														enable: $parents[1].allowPersonRef() === 1 ,
														columns: [
															{ prop: 'name', length: 5 },
														]}"></div></td>
															<td><div id="A4_023"
																	data-bind="ntsComboBox: {
														options: $parents[1].itemListCbb,
														optionsValue: 'code',
														value: selfPastHisAuth ,
														optionsText: 'name',
														editable: false,
														enable: $parents[1].allowPersonRef() === 1  ,
														columns: [
															{ prop: 'name', length: 5 },
														]}"></div></td>


														</tr>
													</table>
												</com:ko-if>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div id="item_role_table_cover">
						<!-- item area -->
						<table id="item_role_table_body">
						</table>
					</div>
				</div>
			</div>
		</ui:define>
	</ui:composition>
</body>
</html>
