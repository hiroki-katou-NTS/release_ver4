<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:com="http://xmlns.jcp.org/jsf/component"
	xmlns:h="http://xmlns.jcp.org/jsf/html">
<body>
	<ui:composition template="../../../../master/base.xhtml">
		<ui:define name="htmlHead">
		<title>#{i18n.getText('CPS009_1')}</title>
			<com:scriptfile set="IGNITE" />
			<com:ValidatorScript>
					nts.uk.shr.com.time.TimeWithDayAttr
					nts.uk.ctx.pereg.dom.person.setting.init.ValueSettingCode
					nts.uk.ctx.pereg.dom.person.setting.init.ValueSettingName
					nts.uk.ctx.bs.person.dom.person.info.personnamegroup.PersonName
<!-- 					nts.uk.ctx.bs.person.dom.person.info.personnamegroup.PersonNameKana -->
					nts.uk.ctx.bs.person.dom.person.info.fullnameset.FullName
					nts.uk.ctx.bs.person.dom.person.info.fullnameset.FullNameKana
					nts.uk.ctx.bs.person.dom.person.info.personnamegroup.BusinessName
					nts.uk.ctx.bs.person.dom.person.info.personnamegroup.BusinessEnglishName
					nts.uk.ctx.bs.person.dom.person.info.personnamegroup.BusinessOtherName 
					nts.uk.ctx.bs.person.dom.person.info.PersonMobile
					nts.uk.ctx.bs.person.dom.person.info.PersonMailAddress
					nts.uk.ctx.bs.person.dom.person.info.Hobby
					nts.uk.ctx.bs.person.dom.person.info.Taste
					nts.uk.ctx.bs.person.dom.person.info.Nationality
					nts.uk.ctx.bs.employee.dom.employeeinfo.EmployeeCode
					nts.uk.ctx.bs.employee.dom.employeeinfo.EmployeeMail
					nts.uk.ctx.bs.employee.dom.employeeinfo.CompanyMobile
					nts.uk.ctx.bs.employee.dom.employeeinfo.HiringType

					<!-- 	
					nts.uk.ctx.bs.person.dom.person.currentdddress.PersonAddress1
				    nts.uk.ctx.bs.person.dom.person.currentdddress.PersonAddressKana1
				    nts.uk.ctx.bs.person.dom.person.currentdddress.PersonAddress2
					nts.uk.ctx.bs.person.dom.person.currentdddress.PersonAddressKana2
					nts.uk.ctx.bs.person.dom.person.info.currentaddress.HomeSituationType
					nts.uk.ctx.bs.person.dom.person.info.currentaddress.HouseRent
					nts.uk.ctx.bs.employee.dom.employeeinfo.CompanyMobile				
					nts.uk.ctx.bs.person.dom.person.info.currentaddress.Perfectures
					nts.uk.ctx.bs.person.dom.person.info.currentaddress.CountryId
					nts.uk.ctx.bs.person.dom.person.info.currentaddress.PhoneNumber -->
   			</com:ValidatorScript>
			<com:stylefile path="cps009.a.style.css" />
			<com:scriptfile path="cps009.a.service.js" />
			<com:scriptfile path="layout-control-ko-ext.js" />
			<com:scriptfile path="cps009.a.start.js" />
			<com:scriptfile path="cps009.a.vm.js" />
		</ui:define>

		<ui:define name="content">
			<div id="functions-area">
				<!-- A1_001: button 新規 -->
				<button id="A1_001" tabindex="1" data-bind="click: openDDialog">#{i18n.getText('CPS009_3')}</button>
				<!-- A1_002: button 登録 -->
				<button id="A1_002" class="proceed" data-bind="click: update, enable: $root.errors.isEmpty" tabindex="2">#{i18n.getText('CPS009_4')}</button>
				<!-- A1_003: button 複製 -->
				<button id="A1_003" data-bind="click: openCDialog" tabindex="3">#{i18n.getText('CPS009_5')}</button>
				<!-- A1_004: button 削除 -->
				<button id="A1_004" class="danger" data-bind="click: deleteInitValue" tabindex="4">#{i18n.getText('CPS009_6')}</button>
				<!-- A1_005: link label 個人情報定義へ -->
				<div class='float-right'>
					<a class='goout' data-bind="ntsLinkButton: {jump: '/view/cps/002/a/index.xhtml' }" tabindex="5">#{i18n.getText('CPS009_7')}</a>
				</div>
			</div>
			<div id="contents-area" class="cf">
				<div id="content">
					<!-- A2_001: 選択パネル -->
					<div id="content-left"
						data-bind="ntsPanel:{width: '260px', height: '407px',direction: 'right', showIcon: false, visible: true}">
						<!-- A2_002: gridList 初期値設定一覧 -->
						<table id="category_grid"
							data-bind="ntsGridList: {
							name: '#[CPS009_9]',	
							dataSource: initValSettingLst ,
							primaryKey: 'settingId' ,
							columns: settingColums ,
							multiple: false,
							value: initSettingId,
							rows:15 }" tabindex="6">
						</table>
					</div>
					<div id="content-right">
						<div>
							<!-- A3_001: label コード/名称 -->
							<div data-bind="ntsFormLabel: {required: true, constraint: ['ValueSettingCode' , 'ValueSettingName']}" class='distane'>
								<label>#{i18n.getText('CPS009_12')}</label>
							</div>
							<!-- A3_002: コード -->
							<input id="ctgCode" 
								data-bind="ntsTextEditor: {
								name: '#[CPS009_13]',
								value: currentCategory().settingCode ,
								constraint: 'ValueSettingCode',
								enable: false,
								immediate: false}" tabindex="7"></input>
							<!-- A3_003: 名称 -->
							<input id="ctgName"
								data-bind="ntsTextEditor: {
								name: '#[CPS009_14]',
								value: currentCategory().settingName ,
								constraint: 'ValueSettingName',
								enable: true,
								immediate: false,
								required: true}" tabindex="8"></input>
						</div>
						<div id='sub-content-right'>
							<div id="search_his" class='flex valign-center'>
							<!-- A3_004: カテゴリー検索 -->
							<div id="search" tabindex="9"
									data-bind="ntsSearchBox: {
									name: '#[CPS009_17]',
									searchMode: 'filter',
									targetKey: 'perInfoCtgId',
									mode: 'igGrid', 
									comId: 'item_grid',
									items: currentCategory().ctgList ,  
									selectedKey: 'perInfoCtgId',
									placeHolder: '名称で検索…',
									searchText: '絞り込み',
									fields: ['categoryName']}" />
								<div id="history" class="flex valign-center">
									<!-- A3_012: Label: 基準日ラベル -->
									<label> #{i18n.getText('CPS009_19')}</label>
									<!-- A3_13: button ヘルプボタン -->
									<button id="A3_13" class="small" data-bind="ntsHelpButton: {image: 'helpcps0091.png',position: 'right top',enable: true }" tabindex="11">?</button>
									<!-- A3_014: 履歴参照基準日(History reference date) -->
									<div id="date1" data-bind="ntsDatePicker: {
											name: '#[CPS009_19]',
											value: baseDate, 
											required: true,
											dateFormat: 'YYYY/MM/DD'}" tabindex="12"></div>
									<!-- A3_15: button 適用 -->
									<button id="A3_15" data-bind="click: historyFilter_Lan" tabindex="13">#{i18n.getText('CPS009_20')}</button>
								</div>							
							</div>
							<div id='sub-left'>	
								<!-- A3_005: list カテゴリ一覧 -->								
 								<table id="item_grid"   
									data-bind="ntsGridList: {	
									dataSource: currentCategory().ctgList ,
									primaryKey: 'perInfoCtgId' ,
									columns: currentCategory().ctgColums ,
									multiple: false,
									value: currentItemId,
									rows:15 }" tabindex="10">
								</table >
								<div style=" margin-top: 40px;">
								<!-- A3_011: label 済マーク説明 -->
								<span>#{i18n.getText('CPS009_18')}</span>
								</div>
							</div>
							<div id='sub-center'>
							 <span class="caret-background caret-right direction-right" style="margin-top: 135px;"></span>
							</div>
							<div id='sub-right' tabindex="14">
								<!-- A3_016: table 項目初期値設定表 -->
								<table class="contents-header" >
								<thead>
										<tr>
											<!-- A3_017: header 項目名 -->
											<td id="COL_1">#{i18n.getText('CPS009_21')}</td>
											<td id="COL_2">
												<!-- A3_018: button 一括設定ボタン -->
												<button id="A2_012" class = "small" data-bind=" click: openBDialog" tabindex="15">#{i18n.getText('CPS009_22')} </button>
												<!-- A3_019: help button -->
												<button id="help" data-bind="ntsHelpButton: {image: 'helpcps0092.png',position: 'right top', enable: true }" tabindex="16">?</button>
											</td>
											<!-- A3_020: header 値 -->
											<td id="COL_3" >#{i18n.getText('CPS009_23')}</td>
										</tr>
								</thead>
								</table>

								 <section class="table-container">
								  <div>
								  <table > 
							         
									<tbody data-bind="foreach: currentCategory().itemList()">
										<td id="name" class='input-units-1'
											data-bind="css:{ 
											requiredCell: isRequired(), 
											notrequiredCell:!isRequired()}">
											<span class="months-input " data-bind="text: itemName" />
										</td>
										<td class="input-units-2">
											<div id="combo-box"
												data-bind="ntsComboBox: {
												options: listComboItem,
												optionsValue: 'code',
												value: selectedRuleCode,
												optionsText: 'name',
												editable: false,
												visibleItemsCount: 5,
												enable: true,
												dropDownAttachedToBody:true,
												columns: [
													{ prop: 'name', length: 10 },
												]}" ></div>

										</td>
										  
									<com:ko-if bind="[0, 1, 3, 4, 5, 6, 7, 8, undefined].indexOf(selectedRuleCode()) > -1"> 
 										<td id="notdata" >
 										<span></span>
 										</td>
 									</com:ko-if> 

 						 	 		<com:ko-if bind="(selectedRuleCode() === 2 )">   
										<td class="input-units-3 ">
											<!-- String  -->
											<com:ko-if bind="(dataType() === 1)">
												
												<com:ko-if bind="(isRequired() === 1)">
													<com:ko-if bind="(fixedItem === true)">
													<input id="string" class="sub-input-units save-error"
															data-bind="ntsTextEditor: {
															name:  itemName ,
															value: stringValue , 
															constraint: constraint,
															required: true},
															attr: { NameID: itemName }" />
													</com:ko-if> 
													
													<com:ko-if bind="(fixedItem === false)">
													<input id="string" class="sub-input-units save-error"
															data-bind="ntsTextEditor: {
															name:  itemName ,
															value: stringValue , 
															constraint: itemCode,
															required: true},
															attr: { NameID: itemName }" />
													</com:ko-if> 
																										
												</com:ko-if> 
												
												<com:ko-if bind="(isRequired() === 0)">
													<com:ko-if bind="(fixedItem === true)">
													<input id="string" class="sub-input-units save-error"
															data-bind="ntsTextEditor: {
															name:  itemName ,
															value: stringValue , 
															constraint: constraint},
															attr: { NameID: itemName }" />
													</com:ko-if> 
													
													<com:ko-if bind="(fixedItem === false)">
													<input id="string" class="sub-input-units save-error"
															data-bind="ntsTextEditor: {
															name:  itemName ,
															value: stringValue , 
															constraint: itemCode},
															attr: { NameID: itemName }" />
													</com:ko-if> 													
												

												</com:ko-if> 
											</com:ko-if> 
											
											<!--  date  --> 
											 <com:ko-if bind="(dataType() === 3)">
											 
											 	<!--  date thuộc kiểu ngày tháng năm   -->
											 	<com:ko-if bind="(dateType === 1)">
											 		<com:ko-if bind="(isRequired() === 1)">
														<div id="date" class="sub-input-units save-error" 
															 data-bind="ntsDatePicker: {
															 name:  itemName,
															 value: dateValue, 
															 dateFormat: 'YYYY/MM/DD',
															 valueFormat: 'YYYY/MM/DD',
															 required: true
															 }, attr: { NameID: itemName }" >
														 </div>
													 </com:ko-if> 
													 
											 		<com:ko-if bind="(isRequired() === 0)">
														<div id="date" class="sub-input-units save-error" 
															 data-bind="ntsDatePicker: {
															 name:  itemName,
															 value: dateValue, 
															 dateFormat: 'YYYY/MM/DD',
															 valueFormat: 'YYYY/MM/DD'
															 }, attr: { NameID: itemName }" >
														 </div>
													 </com:ko-if> 													 
												</com:ko-if>
												
												<!-- date thuộc kiểu tháng năm   -->
											 	<com:ko-if bind="(dateType === 2)">
                   									
                   									<com:ko-if bind="(isRequired() === 1)">
	                   									<div id="date" class="sub-input-units save-error" 
	                   										data-bind="ntsDatePicker: {
		                   									name:  itemName,
		                   									value: dateValue, 
		                   									dateFormat: 'YYYY/MM', 
		                   									valueFormat: 'YYYY/MM',
		                   									required: true
		                   									}, attr: { NameID: itemName }" >
		                   								</div>	
	                   								 </com:ko-if> 	
	                   								 
                   									<com:ko-if bind="(isRequired() === 0)">
	                   									<div id="date" class="sub-input-units save-error" 
	                   										data-bind="ntsDatePicker: {
		                   									name:  itemName,
		                   									value: dateValue, 
		                   									dateFormat: 'YYYY/MM', 
		                   									valueFormat: 'YYYY/MM'
		                   									}, attr: { NameID: itemName }" >
		                   								</div>	
	                   								</com:ko-if> 	
	                   									                   								 								
												</com:ko-if>
												
												<!-- date thuộc kiểu  năm  	 -->		
											 	<com:ko-if bind="(dateType === 3)">
													<com:ko-if bind="(isRequired() === 1)">
														<div id="datey" class="sub-input-units save-error" 
															data-bind="ntsDatePicker: {
															name:  itemName,
															value: dateValue, 
															dateFormat: 'YYYY', 
															valueFormat: 'YYYY',
															required: true},
															attr: { NameID: itemName }" >
														</div>	
													</com:ko-if> 	
																										
													<com:ko-if bind="(isRequired() === 0)">
														<div id="datey" class="sub-input-units save-error" 
															data-bind="ntsDatePicker: {
															name:  itemName,
															value: dateValue, 
															dateFormat: 'YYYY', 
															valueFormat: 'YYYY'},
															attr: { NameID: itemName }" >
														</div>	
													</com:ko-if> 	
												</com:ko-if>	
																																		
											</com:ko-if> 
											
											<!-- timeitem   -->
											<com:ko-if bind="(dataType() === 4)">
												<com:ko-if bind="(isRequired() === 1)">														
													<input id="timeItem"  class="sub-input-units save-error "
														data-bind="ntsTimeEditor: {
															name: itemName,
															value: dateWithDay,
															constraint: itemCode,
															inputFormat: 'time', 
													 		mode: 'time',
															required: true,
															enable: true,
															readonly: false}" />
												</com:ko-if> 	
																							
												<com:ko-if bind="(isRequired() === 0)">
													<input id="timeItem"  class="sub-input-units save-error "
														data-bind="ntsTimeEditor: {
															name: itemName,
															value: dateWithDay,
															constraint: itemCode,
															inputFormat: 'time', 
													 		mode: 'time',
															required: false,
															enable: true,
															readonly: false}" />														
														
												</com:ko-if> 	
											</com:ko-if>
											
										<!-- 	 timepoint   -->
											 <com:ko-if bind="(dataType() === 5)">
											 	<com:ko-if bind="(isRequired() === 1)">
													<input id="timePoint" class="sub-input-units save-error"
															data-bind="ntsTimeWithDayEditor: { 
															name: itemName, 
															constraint: itemCode, 
															value: dateWithDay, 
															enable: true, 
															readonly: false,
															required: true },
															attr: { NameID: itemName }" />
												</com:ko-if>
																							 
											 	<com:ko-if bind="(isRequired() === 0)">
													<input id="timePoint" class="sub-input-units save-error"
															data-bind="ntsTimeWithDayEditor: { 
															name: itemName, 
															constraint: itemCode, 
															value: dateWithDay, 
															enable: true, 
															readonly: false },
															attr: { NameID: itemName }" />
												</com:ko-if>
											</com:ko-if>
											
											<!--   list box  -->
											 
											 <com:ko-if bind="(dataType() === 6)">
												<div id = "combox1" class="input-units-3 "
													data-bind="ntsComboBox: {
													options: selection,
													optionsValue: 'optionValue',
													value: selectedCode,
													optionsText: 'optionText',
													editable: false,
													enable: true,
													dropDownAttachedToBody:true,
													columns: [
														{ prop: 'optionText', length: 10 },
													]}" ></div>
											</com:ko-if>
											
											<!-- number   -->
											<com:ko-if bind="(dataType() === 2)">
											
											<com:ko-if bind=" ((numbericItem.numberDecimalPart === 0) &amp; (numbericItem.numberIntegerPart !== 0)) ">
												<com:ko-if bind="(isRequired() === 1)">
												<div data-bind="with: numbereditor">
									
	 												<input class="sub-input-units save-error" id="number" data-bind="ntsNumberEditor: { 
	 														name: $parent.itemName,
	 												 		value: value,
															constraint: constraint,
															option: option,
															enable: enable,
															readonly: readonly,
															immediate: false,
															required: true},
															attr: { NameID: $parent.itemName }" /> 
												</div>
												</com:ko-if>
												
												<com:ko-if bind="(isRequired() === 0)">
												<div data-bind="with: numbereditor">
									
	 												<input class="sub-input-units save-error" id="number" data-bind="ntsNumberEditor: { 
	 												 		name: $parent.itemName,
	 												 		value: value,
															constraint: constraint,
															option: option,
															enable: enable,
															readonly: readonly,
															immediate: false},
															attr: { NameID: $parent.itemName }" /> 
												</div>
												</com:ko-if>
																								
											</com:ko-if>
											
											<com:ko-if bind=" ((numbericItem.numberDecimalPart !== 0)) ">
												<com:ko-if bind="(isRequired() === 1)">
												<div data-bind="with: numbereditor">
													
		 												<input class="sub-input-units save-error  " id="number" data-bind="ntsNumberEditor: { 
		 														name: $parent.itemName,
		 														value: value,
																constraint: constraint,
																option: option,
																enable: enable,
																readonly: readonly,
																immediate: false,
																required: true},
																attr: { NameID: $parent.itemName }" /> 
												</div>
												</com:ko-if>
												
												<com:ko-if bind="(isRequired() === 0)">
												<div data-bind="with: numbereditor">
													
		 												<input class="sub-input-units save-error " id="number" data-bind="ntsNumberEditor: { 
		 														name: $parent.itemName,
		 														value: value,
																constraint: constraint,
																option: option,
																enable: enable,
																readonly: readonly,
																immediate: false},
																attr: { NameID: $parent.itemName }" /> 
												</div>
												</com:ko-if>												
											</com:ko-if>											
											</com:ko-if>						
											
										</td>
 									</com:ko-if> 

									</tbody>								         
								  </table>
								  </div>
								 </section>
							</div>
						</div>

					</div>
				</div>
			</div>
		</ui:define>
	</ui:composition>
</body>
</html>