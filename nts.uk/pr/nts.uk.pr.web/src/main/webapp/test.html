<!DOCTYPE html>
<html>
<head>
<title></title>
<meta charset="UTF-8">

<link rel="stylesheet" type="text/css"
	href="lib/generic/jqueryui/jquery-ui.css" />
<link rel="stylesheet" type="text/css"
	href="lib/generic/igniteui/css/themes/infragistics/infragistics.theme.css" />
<link rel="stylesheet" type="text/css"
	href="lib/generic/igniteui/css/structure/infragistics.css" />
<link rel="stylesheet" type="text/css"
	href="lib/nittsu/ui/style/stylesheets/base.css" />
<link rel="stylesheet" type="text/css"
	href="lib/nittsu/ui/style/stylesheets/jquery.steps.css" />
<style>
a {
	color: #00B050;
	text-decoration: none;
}

h2 {
	color: #00B050;
	font-size: 25px;
	margin-bottom: 20px;
}

hr {
	margin: 25px 0;
}
</style>
<script src="./lib/generic/jquery/jquery-3.1.1.js"></script>
<script src="./lib/generic/jquery/jquery.steps.js"></script>
<script src="./lib/generic/jqueryui/jquery-ui.min.js"></script>
<script src="./lib/generic/knockoutjs/knockout-3.4.0.js"></script>
<script src="./lib/generic/knockoutjs/knockout.mapping-2.4.1.js"></script>
<script src="./lib/generic/lodash/lodash-4.16.6.min.js"></script>
<script src="./lib/generic/igniteui/js/infragistics.core.js"></script>
<script src="./lib/generic/igniteui/js/infragistics.lob.js"></script>
<script
	src="./lib/generic/igniteui/js/extensions/infragistics.ui.tree.knockout-extensions.js"></script>
<script
	src="./lib/generic/igniteui/js/extensions/infragistics.ui.combo.knockout-extensions.js"></script>
<script src="lib/nittsu/util.js"></script>
<script src="lib/nittsu/text.js"></script>
<script src="lib/nittsu/ui/notify.js"></script>
<script src="lib/nittsu/ui/validation.js"></script>
<script src="lib/nittsu/ui/jquery-ext.js"></script>
<script src="lib/nittsu/ui/ko-ext.js"></script>
<script src="lib/nittsu/ui/ui.js"></script>
<script>
			var __viewContext = {
				primitiveValueConstraints: {
					CompanyCode: {
						valueType: "String",
						charType: "Numeric",
						maxLength: 4
					},
					CompanyName: {
						valueType: "String",
						charType: "Any",
						maxLength: 20
					}
				}
			};
		</script>
<script>
			$(function () {
				var vm = {
					companyCode: ko.observable('0001'),
					companyName: ko.observable('てすと会社'),
					// TextBox ViewModel
					textbox: {
						value: ko.observable("test"),
						constraint: 'CompanyCode'
					},
					// SwitchButton ViewModel
					switchbutton: {
						roundingRules: ko.observableArray([
							{ code: '1', name: '四捨五入' },
							{ code: '2', name: '切り上げ' },
							{ code: '3', name: '切り捨て' }
						]),
						selectedRuleCode: ko.observable('1')
					},
					// CheckBox ViewModel
					checkbox: {
						// Check box test.
						isHealthInsurance: ko.observable(true),
						isEnable:  ko.observable(true),
					},
					multicheckbox: {
						boxes: ko.observableArray([
				            new BoxModel(1, 'box 1'), new BoxModel(2, 'box 2'), new BoxModel(3, 'box 3')
				    	]),
				    	selectedBoxes: ko.observableArray([])
				    },
					// ComboBox ViewModel
					combobox: {
						itemList: ko.observableArray([
							new ItemModel('基本給1', '基本給'),
							new ItemModel('基本給2', '役職手当'),
							new ItemModel('0003', '基本給')
						]),
						itemName: ko.observable(''),
						currentCode: ko.observable(3),
						selectedCode: ko.observable('0002'),
						isEnable: ko.observable(true),
						isEditable: ko.observable(true),
						addOptions: function () {
							var self = this;
							var newCode = self.currentCode() + 1;
							var itemCode = newCode.toString();
							var codeLength = itemCode.length;
							while (codeLength < 4) {
								itemCode = '0' + itemCode;
								codeLength++;
							}
							self.itemList.push(new ItemModel(itemCode, self.itemName()));
							self.currentCode(newCode);
						},
						clearOptions: function () {
							this.itemList([]);
						},
						removeByCode: function () {
							var self = this;
							var selected = self.itemList().filter(function (item) { return item.code == self.selectedCode(); })[0];
							self.itemList.remove(selected);
						}
					},
				 	// ListBox ViewModel
					listbox: {
						itemList: ko.observableArray([
							new ItemModel('基本給2', '基本給'),
							new ItemModel('基本給1', '役職手当'),
							new ItemModel('基本給3', '基本給')
						]),
						itemName: ko.observable(''),
						currentCode: ko.observable(3),
						selectedCode: ko.observable(null),
						isEnable: ko.observable(true),
						selectedCodes: ko.observableArray([]),
						addOptions: function () {
							var self = this;
							var newCode = self.currentCode() + 1;
							var itemCode = newCode.toString();
							var codeLength = itemCode.length;
							while (codeLength < 4) {
								itemCode = '0' + itemCode;
								codeLength++;
							}
							self.itemList.push(new ItemModel(itemCode, self.itemName()));
							self.currentCode(newCode);
						},
						deselectAll: function () {
							$('#list-box').ntsListBox('deselectAll');
						},
						selectAll: function () {
							$('#list-box').ntsListBox('selectAll');
						},
						clearOptions: function () {
							this.itemList([]);
						},
						remove: function () {
							var self = this;
							var selected = self.itemList().filter(function (item) { return item.code == self.selectedCode(); })[0];
							self.itemList.remove(selected);
							var selecteds = self.itemList().filter(function (item) { return self.selectedCodes().indexOf(item.code) != -1; });
							self.itemList.removeAll(selecteds);
						}
					},
				 	// TreeGrid ViewModel
					treegrid: {
						items1: ko.observableArray([new Node('0001', 'サービス部', [
							new Node('0001-1', 'サービス部1', []),
							new Node('0001-2', 'サービス部2', []),
							new Node('0001-3', 'サービス部3', [])
						]), new Node('0002', '開発部', [])]),
						items2: ko.observableArray([new Node('0001', 'サービス部', [
							new Node('0001-1', 'サービス部1', []),
							new Node('0001-2', 'サービス部2', []),
							new Node('0001-3', 'サービス部3', [])
						]), new Node('0002', '開発部', [])]),
						selectedCode: ko.observableArray([]),
						singleSelectedCode: ko.observable(null),
						index: 0,
						resetSelection: function () {
							var self = this;
							self.items1([new Node('0001', 'サービス部', [
									new Node('0001-1', 'サービス部1', []),
									new Node('0001-2', 'サービス部2', []),
									new Node('0001-3', 'サービス部3', [])
								]), new Node('0002', '開発部', [])]);
							self.items2([new Node('0001', 'サービス部', [
								new Node('0001-1', 'サービス部1', []),
								new Node('0001-2', 'サービス部2', []),
								new Node('0001-3', 'サービス部3', [])
							]), new Node('0002', '開発部', [])]);
							self.singleSelectedCode('0002');
							self.selectedCode(['0001-1', '0002']);
						},
						changeDataSource: function () {
							var self = this;
							var i = 0;
							var newArrays = new Array();
							while (i < 50) {
								self.index++;
								i++;
								newArrays.push(new Node(self.index.toString(), 'Name ' + self.index.toString(), []));
							};
							self.items1(newArrays);
							self.items2(newArrays);
						}
					},
					//Wizard ViewModel
					wizard: {
						stepList: ko.observableArray([
		                    new Step('step-1', '.step-1'),
		                    new Step('step-2', '.step-2'),
		                    new Step('step-3', '.step-3'),
		                    new Step('step-4', '.step-4'),
		                    new Step('step-5', '.step-5'),
		                    new Step('step-6', '.step-6')
		                ]),
		                stepSelected: ko.observable(new Step('step-1', '.step-1')),
		                user: ko.observable(new User('U1', 'User 1')),
		                begin: function () {
		                    $('#wizard').begin();
		                },
		                end: function () {
		                    $('#wizard').end();
		                },
		                next: function () {
		                    $('#wizard').steps('next');
		                },
		                previous: function () {
		                    $('#wizard').steps('previous');
		                },
		                getCurrentStep: function () {
		                    alert($('#wizard').steps('getCurrentIndex'));
		                },
		                gotoStep: function () {
		                    var self = this;
		                    var index = self.stepList.indexOf(self.stepSelected());
		                    $('#wizard').setStep(index);
		                }
					}
				};
				//Wizard Step
				function Step(id, content) {
	                this.id = id;
	                this.content = content;
            	}
				//checkbox item
				function BoxModel(id,name) {
				    this.id = ko.observable(id);
				    this.name = ko.observable(name);
				}
            	//Wizard User
            	function User(code, name) {
	                this.code = ko.observable(code);
	                this.name = ko.observable(name);
	                this.name.subscribe(function (val) { alert(val); });
	            }
				// ListBox & ComboBox Item
				function ItemModel(code, name) {
					this.code = code;
					this.name = name;
				}
				
				// TreeGrid Node
				function Node(code, name, childs) {
					this.code = code;
					this.name = name;
					this.nodeText = code + ' ' + name;
					this.childs = childs;
					this.custom = 'Random' + new Date().getTime();
				}
				
				ko.applyBindings(vm);
				
			});
		</script>
</head>
<body>
	<div>てすとぺーじ</div>
	会社コード：
	<input type="text"
		data-bind="ntsTextBox: { value: companyCode, constraint: 'CompanyCode' }" />
	<br /> 会社名：
	<input type="text"
		data-bind="ntsTextBox: { value: companyName, constraint: 'CompanyName' }" />
	<br />
	<hr />
	<div data-bind="with: textbox">
		<h2>
			<a href="sample/editor/editor.xhtml">&#9655; Editor Sample</a>
		</h2>
	</div>
	<hr />
	<h2>
		<a href="sample/dialog/dialog.xhtml">&#9655; Dialog Sample</a>
	</h2>
	<hr />
	<div data-bind="with: switchbutton">
		<h2>Switch Button</h2>
		<div id="switchButtonTest"
			data-bind="ntsSwitchButton: {
				options: roundingRules,
				optionsValue: 'code',
				optionsText: 'name',
				value: selectedRuleCode }"
			class="cf"></div>
	</div>
	<hr />
	<div data-bind="with: checkbox">
		<h2>CheckBox</h2>
		<div id="checkBoxTest1"
			data-bind="ntsCheckBox: { checked: isHealthInsurance, text: 'Txt_HealthInsurance', enable: isEnable }"
			class="cf"></div>
		<div id="checkBoxTest2" data-bind="ntsCheckBox: { checked: isEnable}"
			class="cf">This is test text for enable</div>
		Your selected state:
		<div data-bind="text: isHealthInsurance"></div>
	</div>
	<hr />
	<div data-bind="with: combobox">
		<h2>ComboBox</h2>
		<div>
			<input data-bind="value: itemName"></input>
			<button data-bind="click: addOptions">Add Item</button>
		</div>
		<br />
		<div id="combo-box"
			data-bind="ntsComboBox: {options: itemList,
							optionsValue: 'code',
							value: selectedCode,
							optionsText: 'name',
							editable: isEditable(),
							enable: isEnable(),
							columns: [
								{ prop: 'code', length: 4 },
								{ prop: 'name', length: 10 },
							]}"
			class="cf"></div>
		<button data-bind="click: removeByCode">Remove Item</button>
		<br />

		<div class="status">
			<label><input type="checkbox" data-bind="checked: isEnable" />Enable</label>
			<label><input type="checkbox" data-bind="checked: isEditable" />Editable</label>
		</div>
		<div>
			Your selected code: <span data-bind="text:selectedCode"></span>
		</div>
	</div>
	<hr />
	<div data-bind="with: listbox">
		<h2>ListBox</h2>
		<div>
			<input data-bind="value: itemName"></input>
			<button data-bind="click: addOptions">Add Item</button>
		</div>
		<br />
		<div id="list-box"
			data-bind="ntsListBox: {options: itemList,
							optionsValue: 'code',
							optionsText: 'name',
							multiple: true,
							value: selectedCodes,
							enable: isEnable(),
							columns: [
								{ prop: 'code', length: 4 },
								{ prop: 'name', length: 10 }
							]}"
			class="cf"></div>
		<button data-bind="click: remove">Remove Item</button>
		<button data-bind="click: selectAll">Select All</button>
		<button data-bind="click: deselectAll">Deselect All</button>
		<br />
		<!-- Multiple is false -->
		<span data-bind="text: selectedCode()"></span>
		<!-- Multiple is true -->
		<span data-bind="text: selectedCodes()"></span> <br /> <label
			class="status"> <input type="checkbox"
			data-bind="checked: isEnable">Enable
		</label>
	</div>
	<hr />
	<div data-bind="with: treegrid" class="cf">
		<div style="float: left; margin-right: 15px;">
			<h2>TreeGrid Multi Selection</h2>
			<table id="treegrid"
				data-bind="ntsTreeGridView:{
				   	width: 500,
					height: 500,
					options: items1,
					selectedValues: selectedCode,
					optionsValue: 'code',
					optionsChild: 'childs',
					optionsText: 'nodeText',
					multiple: true,
					enable: true,
					showCheckBox: true}"
				class="cf">
			</table>
		</div>
		<div style="float: left; margin-right: 15px;">
			<h2>TreeGrid Single Selection</h2>
			<table id="treegrid2"
				data-bind="ntsTreeGridView:{
				   	width: 700,
					height: 500,
					options: items2,
					value: singleSelectedCode,
					optionsValue: 'code',
					optionsChild: 'childs',
					optionsText: 'nodeText',
					multiple: false,
					enable: true,
					extColumns: [{headerText: 'Custom', key: 'custom', width: '150px', dataType: 'string'}],
					showCheckBox: false}"
				class="cf">
			</table>
		</div>
		<div style="float: left">
			Your multiple selected code:
			<!-- ko foreach: selectedCode -->
			<div data-bind="text: $data"></div>
			<!-- /ko -->
			<br />
			<button data-bind="click: resetSelection">Reset</button>
			<button data-bind="click: changeDataSource">Next Datasource</button>

			<br /> <br /> Your single selected code:
			<div data-bind="text: singleSelectedCode"></div>
			<br />
		</div>
	</div>
	<hr />
	<div data-bind="with: multicheckbox">
          <h2>Multi Check Box Custom Bindings</h2>
          <div style="float: left; margin-right: 25px">
	          <strong>List of Boxes</strong>
	          <div data-bind="foreach: boxes">
	              <div data-bind="ntsMultiCheckBox: {isChecked: $parent.selectedBoxes, content: name, item: $data}">
	              </div>
	              <br/>
	          </div>
	      </div>
          <p> You've selected</p>
          <div style="float: left" data-bind="foreach: selectedBoxes">
              <p><span data-bind="text: id"></span></p>
          </div>
      </div>
</body>
</html>
