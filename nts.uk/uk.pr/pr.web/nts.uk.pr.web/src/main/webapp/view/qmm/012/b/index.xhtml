<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:com="http://xmlns.jcp.org/jsf/component"
	xmlns:h="http://xmlns.jcp.org/jsf/html">
<body>
	<ui:composition template="../../../../master/base.xhtml">
		<ui:define name="htmlHead">
			<com:ValidatorScript>
				nts.uk.ctx.pr.core.dom.wageprovision.statementitem.ItemNameCd
				nts.uk.ctx.pr.core.dom.wageprovision.statementitem.ItemName
				nts.uk.ctx.pr.core.dom.wageprovision.statementitem.ShortName
				nts.uk.ctx.pr.core.dom.wageprovision.statementitem.itemrangeset.MonetaryValue
				nts.uk.shr.com.primitive.Memo
				nts.uk.ctx.pr.core.dom.wageprovision.statementitem.paymentitemset.LimitAmount
			</com:ValidatorScript>
			<com:stylefile path="qmm012.b.style.css" />
			<com:scriptfile set="IGNITE" />
			<com:scriptfile path="../share/model.js" />
			<com:scriptfile path="qmm012.b.start.js" />
			<com:scriptfile path="qmm012.b.service.js" />
			<com:scriptfile path="qmm012.b.vm.js" />
		</ui:define>

		<ui:define name="content">
			<div id="functions-area">
				<!-- 新規 -->
				<button id="B1_1" class="newBtn" data-bind="click : create, enable: true">#{i18n.getText('QMM012_20')}</button>
				<!-- 登録 -->
				<button id="B1_2" class="registerBtn proceed" data-bind="click: register, enable: true">#{i18n.getText('QMM012_21')}</button>
				<!-- コピー -->
				<button id="B1_3" class="copyBtn" data-bind="click: copy, enable: false">#{i18n.getText('QMM012_22')}</button>
				<!-- 削除 -->
				<button id="B1_4" class="deleteBtn danger" data-bind="click: deleteItem, enable: true">#{i18n.getText('QMM012_23')}</button>
				<!-- Excel出力 -->
				<button id="B1_5" class="outputExcelBtn" data-bind="click: outputExcel, enable: false">#{i18n.getText('QMM012_24')}</button>
				<!-- マスタ修正ログ -->
				<button id="B1_6" class="modifyLogBtn" data-bind="click: modifyLog, enable: true">#{i18n.getText('QMM012_25')}</button>
				<!-- 印字名称の登録 -->
				<button id="B1_7" class="registerPrintingBtn" data-bind="click: registerPrintingName, enable: true">#{i18n.getText('QMM012_10')}</button>
			</div>
			<div id="contents-area">
				<div class="fixed-flex-layout-left">
					<!-- 項目一覧パネル -->
					<div id="B2_1" data-bind="ntsPanel:{width: '410px', height: '470px', direction: 'right', showIcon: true, visible: true}">
						<div class="valign-center control-group">
							<!-- 項目区分 -->
							<div id="B2_2" data-bind="ntsFormLabel: { }">#{i18n.getText('#QMM012_27')}</div>
							<!-- 項目区分リスト -->
							<div id="B2_3" data-bind="ntsComboBox: {name: '#[QMM012_27]',
																	options: categoryList,
																	optionsValue: 'code',
																	visibleItemsCount: 6,
																	value: selectedCategory,
																	optionsText: 'name',
																	enable: true,
																	required: true,
																	selectFirstIfNull: true,
																	columns: [
																		{ prop: 'name', length: 12 }
																	]}"></div>
							<!-- 廃止も表示する -->
							<div id="B2_5" data-bind="ntsCheckBox: { checked: true }">#{i18n.getText('QMM012_28')}</div>
						</div>
						<!-- B2_6, B2_7, B2_8 -->
						<div style="width: 410px" data-bind="ntsSearchBox: {searchMode: 'highlight',
																			label: '#[QMM012_29]',
																			targetKey: 'salaryItemId', 
																			comId: 'statementList', 
																			items: statementItemDataList, 
																			selected: statementItemDataSelected().salaryItemId, 
																			selectedKey: 'salaryItemId',
																			searchText: '#[QMM012_30]',
																			fields: ['itemNameCd'], 
																			mode: 'igGrid'}" />
						<!-- B2_9 -->
						<table  id="statementList" 
							    data-bind="ntsGridList: { name: '#[QMM012_31]',
								options: statementItemDataList,
								primaryKey: 'salaryItemId',
								columns: gridColumns,
								multiple: false,
								rows: 15,
								value: statementItemDataSelected().salaryItemId
							}"></table>
					</div>
					
				</div>
				<div class="fixed-flex-layout-right" data-bind="with: statementItemDataSelected">
					<div class="valign-center control-group">
						<!-- コード/名称 -->
						<div id="B3_1" data-bind="ntsFormLabel: {required: true, constraint: ['ItemNameCd', 'ItemName'] }">#{i18n.getText('#QMM012_29')}</div>
						<div data-bind="with: statementItem" style="display: inline-block;">
							<!-- 項目名コード -->
							<input id="B3_2"
									data-bind="ntsTextEditor :{
										name: '#[QMM012_32]',
										value: itemNameCd,
										constraint: 'ItemNameCd',
										option: {width: '40px'},
										required: true,
										enable: true,
										readonly: false}" />
						</div>
						<div data-bind="with: statementItemName" style="display: inline-block;">
							<!-- 項目名コード -->
							<input id="B3_3"
									data-bind="ntsTextEditor :{
										name: '#[QMM012_33]',
										value: name,
										constraint: 'ItemName',
										option: {width: '200px'},
										required: true,
										enable: true,
										readonly: false}" />
						</div>
						<div data-bind="with: statementItem" style="display: inline-block;">
							<!-- この項目名を廃止する -->
							<div id="B3_12" data-bind="ntsCheckBox: { checked: deprecatedAtr, style: 'warnpanel'}">
								#{i18n.getText('#QMM012_38')}
							</div>
							<!-- 廃止区分について -->
							<button id="B3_13" data-bind="ntsHelpButton: {image: '../resource/QMM012_1.png', position: 'bottom right', enable: true }">?</button>
						</div>
					</div>
					<div class="valign-center control-group" data-bind="with: statementItemName">
					 	<!-- 略名 -->
						<div id="B3_4" data-bind="ntsFormLabel: {required: true }">#{i18n.getText('#QMM012_35')}</div>
						<!-- 項目名コード -->
						<input id="B3_5"
								data-bind="ntsTextEditor :{
									name: '#[QMM012_35]',
									value: shortName,
									constraint: 'ShortName',
									option: {width: '200px'},
									required: true,
									enable: true,
									readonly: false}" />
					</div>
					<div class="valign-center control-group">
						<!-- 項目区分 -->
						<div id="B3_6" data-bind="ntsFormLabel: {required: true }">#{i18n.getText('#QMM012_27')}</div>
						<label data-bind="text: statementItem().categoryName"></label>
					</div>
					<hr style="margin-bottom: 20px;"/>
					<div class="screenC">
						<div data-bind="with: paymentItemSet">
							<div class="valign-center control-group">
								<!-- 課税 -->
								<div id="C1_1" data-bind="ntsFormLabel: {required: true}">#{i18n.getText('#QMM012_39')}</div>
								<!-- 課税一覧 -->
								<div id="C1_2" data-bind="ntsComboBox: {name: '#[QMM012_39]',
																		options: taxList,
																		optionsValue: 'code',
																		visibleItemsCount: 5,
																		value: taxAtr,
																		optionsText: 'name',
																		enable: true,
																		required: true,
																		selectFirstIfNull: true,
																		columns: [
																			{ prop: 'name', length: 16 }
																		]}"></div>
							</div>
							<com:ko-if bind="((taxAtr() == '1') || (taxAtr() == '3'))">
								<br />
								<div class="valign-center control-group">
									<!-- 限度金額指定 -->
									<div id="C4_1" data-bind="ntsFormLabel: {}">#{i18n.getText('#QMM012_76')}</div>
									<!-- 社会保険区分 -->
									<div id="C4_2" class="cf" data-bind="ntsSwitchButton: {
																				options: limitAmountList,
																				optionsValue: 'code',
																				optionsText: 'name',
																				value: limitAmountAtr,
																				enable: true }"></div>
								</div>
								<com:ko-if bind="((limitAmountAtr() == '1') || (limitAmountAtr() == '0') || (limitAmountAtr() == '3'))">
									<com:ko-if bind="(limitAmountAtr() == '1')">
										<div class="valign-center control-group">
											<!-- 限度金額 -->
											<div id="C4_7" data-bind="ntsFormLabel: {required: true}">#{i18n.getText('#QMM012_81')}</div>
											<!-- 限度金額入力 -->
											<input id="C4_8" data-bind="ntsNumberEditor: {
															name: '#[QMM012_81]',
															value: limitAmount,
															constraint: 'LimitAmount',
															option: {
											                    grouplength: 3,
											                    decimallength: 3,
											                    width: '150px',
											                    textalign: 'right',
											                    currencyformat: 'JPY'
											                },
															enable: true}" />
										</div>
									</com:ko-if>
									<com:ko-if bind="(limitAmountAtr() == '0')">
										<div class="valign-center control-group">
											<!-- 限度金額 -->
											<div id="C5_1" data-bind="ntsFormLabel: {}">#{i18n.getText('#QMM012_81')}</div>
											<!-- 限度額マスタ参照ボタン -->
											<button id="C5_2" class="small" data-bind="enable: true">#{i18n.getText('QMM012_37')}</button>
											<!-- 設定限度額マスタ -->
											<label id="C5_3">?????????????????</label>
										</div>
									</com:ko-if>
									<div class="valign-center control-group">
										<!-- 課税金額区分 -->
										<div id="C4_9" data-bind="ntsFormLabel: {}">#{i18n.getText('#QMM012_82')}</div>
										<!-- 課税金額区分 -->
										<div id="C4_10" data-bind="ntsRadioBoxGroup: {
																			options: taxableAmountList,
																			optionsValue: 'id',
																			optionsText: 'name',
																			value: taxableAmountAtr,
																			enable: true}"></div>
									</div>
								</com:ko-if>
							</com:ko-if>
							<com:ko-if bind="(taxAtr() == '4')">
								<div class="valign-center control-group">
									<div class="space1"></div>
									<!-- 定期利用説明 -->
									<span id="C6_1">#{i18n.getText('#QMM012_85')}</span>
								</div>
							</com:ko-if>
							<br />
							<div class="valign-center control-group">
								<!-- 社会保険区分 -->
								<div id="C1_4" data-bind="ntsFormLabel: {}">#{i18n.getText('#QMM012_40')}</div>
								<!-- 社会保険区分 -->
								<div id="C1_5" class="cf" data-bind="ntsSwitchButton: {
																			options: coveredList,
																			optionsValue: 'code',
																			optionsText: 'name',
																			value: socialInsuranceCategory,
																			enable: true }"></div>
							</div>
							<div class="valign-center control-group">
								<!-- 労働保険区分 -->
								<div id="C1_8" data-bind="ntsFormLabel: {}">#{i18n.getText('#QMM012_43')}</div>
								<!-- 労働保険区分区分 -->
								<div id="C1_9" class="cf" data-bind="ntsSwitchButton: {
																			options: coveredList,
																			optionsValue: 'code',
																			optionsText: 'name',
																			value: laborInsuranceCategory,
																			enable: true }"></div>
							</div>
							<br />
							<div class="valign-center control-group">
								<!-- 固定的賃金 -->
								<div id="C1_12" data-bind="ntsFormLabel: {}">#{i18n.getText('#QMM012_44')}</div>
								<!-- 固定的賃金設定区分 -->
								<div id="C1_13" data-bind="ntsRadioBoxGroup: {
																	options: settingAtrList,
																	optionsValue: 'id',
																	optionsText: 'name',
																	value: settingAtr,
																	enable: true}"></div>
							</div>
							<div class="valign-center control-group">
								<div class="space1"></div>
								<!-- 固定的賃金対象区分 -->
								<div id="C1_16" class="cf" data-bind="ntsSwitchButton: {
																			options: coveredList,
																			optionsValue: 'code',
																			optionsText: 'name',
																			value: everyoneEqualSet,
																			enable: (settingAtr() == 1) }"></div>
								<!-- 月給者 -->
								<div id="C1_19" class="space3">#{i18n.getText('#QMM012_47')}</div>
								<!-- 月給者対象区分 -->
								<div id="C1_20" class="cf" data-bind="ntsSwitchButton: {
																			options: coveredList,
																			optionsValue: 'code',
																			optionsText: 'name',
																			value: monthlySalary,
																			enable: (settingAtr() == 0) }"></div>
							</div>
							<div class="valign-center control-group">
								<div class="space1"></div>
								<div class="space2"></div>
								<!-- 日給月給者 -->
								<div id="C1_23" class="space3">#{i18n.getText('#QMM012_48')}</div>
								<!-- 日給月給者対象区分 -->
								<div id="C1_24" class="cf" data-bind="ntsSwitchButton: {
																			options: coveredList,
																			optionsValue: 'code',
																			optionsText: 'name',
																			value: hourlyPay,
																			enable: (settingAtr() == 0) }"></div>
							</div>
							<div class="valign-center control-group">
								<div class="space1"></div>
								<div class="space2"></div>
								<!-- 日給者 -->
								<div id="C1_27" class="space3">#{i18n.getText('#QMM012_49')}</div>
								<!-- 日給者対象区分 -->
								<div id="C1_28" class="cf" data-bind="ntsSwitchButton: {
																			options: coveredList,
																			optionsValue: 'code',
																			optionsText: 'name',
																			value: dayPayee,
																			enable: (settingAtr() == 0) }"></div>
							</div>
							<div class="valign-center control-group">
								<div class="space1"></div>
								<div class="space2"></div>
								<!-- 時給者 -->
								<div id="C1_31" class="space3">#{i18n.getText('#QMM012_50')}</div>
								<!-- 時給者対象区分 -->
								<div id="C1_32" class="cf" data-bind="ntsSwitchButton: {
																			options: coveredList,
																			optionsValue: 'code',
																			optionsText: 'name',
																			value: monthlySalaryPerday,
																			enable: (settingAtr() == 0) }"></div>
							</div>
							<div class="valign-center control-group">
								<!-- 平均賃金 -->
								<div id="C2_1" data-bind="ntsFormLabel: {}">#{i18n.getText('#QMM012_51')}</div>
								<!-- 平均賃金対象区分 -->
								<div id="C2_2" class="cf" data-bind="ntsSwitchButton: {
																			options: coveredList,
																			optionsValue: 'code',
																			optionsText: 'name',
																			value: averageWageAtr,
																			enable: true }"></div>
							</div>
						</div>
						<div class="valign-center control-group" data-bind="with: statementItemDisplaySet">
							<!-- ゼロ表示区分 -->
							<div id="C2_5" data-bind="ntsFormLabel: {}">#{i18n.getText('#QMM012_52')}</div>
							<!-- 平均賃金対象区分 -->
							<div id="C2_6" class="cf" data-bind="ntsSwitchButton: {
																		options: zeroDisplayAtrList,
																		optionsValue: 'code',
																		optionsText: 'name',
																		value: zeroDisplayAtr,
																		enable: true }"></div>
							<!-- 廃止も表示する -->
							<div id="C2_9" data-bind="ntsCheckBox: { checked: itemNameDisplayCustom }">#{i18n.getText('QMM012_55')}</div>
						</div>
						<br />
						<div data-bind="with: itemRangeSet">
							<div class="valign-center control-group">
								<!-- エラー範囲 -->
								<div id="C2_10" data-bind="ntsFormLabel: {}">#{i18n.getText('#QMM012_56')}</div>
								<!-- エラー範囲上限チェック -->
								<div id="C2_11" data-bind="ntsCheckBox: { checked: errorUpperLimitSettingAtrCus }"></div>
								<!-- エラー範囲上限入力 -->
								<input id="C2_12" data-bind="ntsNumberEditor: {
												name: '#[QMM012_57]',
												value: errorUpperRangeValueAmount,
												constraint: 'MonetaryValue',
												option: numberEditorOption,
												enable: errorUpperLimitSettingAtrCus}" />
								<!-- を超える場合にエラーとする -->
								<label id="C2_13">#{i18n.getText('#QMM012_58')}</label>
							</div>
							<div class="valign-center control-group">
								<div class="space1"></div>
								<!-- エラー範囲下限チェック -->
								<div id="C2_14" data-bind="ntsCheckBox: { checked: errorLowerLimitSettingAtrCus }"></div>
								<!-- エラー範囲下限入力 -->
								<input id="C2_15" data-bind="ntsNumberEditor: {
												name: '#[QMM012_59]',
												value: errorLowerRangeValueAmount,
												constraint: 'MonetaryValue',
												option: numberEditorOption,
												enable: errorLowerLimitSettingAtrCus}" />
								<!-- 未満の場合にエラーとする -->
								<label id="C2_16">#{i18n.getText('#QMM012_60')}</label>
							</div>
							<div class="valign-center control-group">
								<!-- アラーム範囲 -->
								<div id="C2_17" data-bind="ntsFormLabel: {}">#{i18n.getText('#QMM012_61')}</div>
								<!-- アラーム範囲上限チェック -->
								<div id="C2_18" data-bind="ntsCheckBox: { checked: alarmUpperLimitSettingAtrCus }"></div>
								<!-- アラーム範囲上限入力 -->
								<input id="C2_19" data-bind="ntsNumberEditor: {
												name: '#[QMM012_62]',
												value: alarmUpperRangeValueAmount,
												constraint: 'MonetaryValue',
												option: numberEditorOption,
												enable: alarmUpperLimitSettingAtrCus}" />
								<!-- を超える場合にアラームとする -->
								<label id="C2_20">#{i18n.getText('#QMM012_63')}</label>
							</div>
							<div class="valign-center control-group">
								<div class="space1"></div>
								<!-- アラーム範囲下限チェック -->
								<div id="C2_21" data-bind="ntsCheckBox: { checked: alarmLowerLimitSettingAtrCus }"></div>
								<!-- アラーム範囲下限入力 -->
								<input id="C2_22" data-bind="ntsNumberEditor: {
												name: '#[QMM012_64]',
												value: alarmLowerRangeValueAmount,
												constraint: 'MonetaryValue',
												option: numberEditorOption,
												enable: alarmLowerLimitSettingAtrCus}" />
								<!-- 未満の場合にアラームとする -->
								<label id="C2_23">#{i18n.getText('#QMM012_65')}</label>
							</div>
							<div class="valign-center control-group">
								<div class="space1"></div>
								<!-- ※エラーの場合はデータが登録されません。アラームの場合は、メッセージが表示されます。（データが登録されます）-->
								<label id="C2_24">#{i18n.getText('#QMM012_66')}</label>
							</div>
						</div>
						<br />
						<div class="valign-center control-group">
							<!-- 項目の有効期間とサイクルの設定 -->
							<div id="C3_1" data-bind="ntsFormLabel: {}">#{i18n.getText('#QMM012_67')}</div>
							<!-- 有効期間設定 -->
							<button id="C3_2" class="small" data-bind="enable: true">#{i18n.getText('QMM012_68')}</button>
							<!-- 期間設定有無 -->
							<label id="C3_3">#{i18n.getText('#QMM012_6970')}</label>
						</div>
						<br />
						<div class="valign-center control-group" data-bind="with: paymentItemSet">
							<!-- 内訳-->
							<div id="C3_4" data-bind="ntsFormLabel: {}">#{i18n.getText('#QMM012_71')}</div>
							<!-- 内訳利用区分 -->
							<div id="C3_5" class="cf" data-bind="ntsSwitchButton: {
																		options: breakdownItemUseList,
																		optionsValue: 'code',
																		optionsText: 'name',
																		value: breakdownItemUseAtr,
																		enable: true }"></div>
						</div>
						<div class="valign-center control-group">
							<div class="space1"></div>
							<!-- 内訳項目設定 -->
							<button id="C3_8" class="small" data-bind="enable: true">#{i18n.getText('QMM012_74')}</button>
							<!-- 内訳設定有無 -->
							<label id="C3_9">#{i18n.getText('#QMM012_6970')}</label>
						</div>
						<br />
						<div class="valign-center control-group" data-bind="with: paymentItemSet">
							<!-- 備考 -->
							<div id="C3_10" data-bind="ntsFormLabel: {}">#{i18n.getText('#QMM012_75')}</div>
							<!-- 備考欄 -->
							<textarea id="C3_11"
									data-bind="ntsMultilineEditor :{
										name: '#[QMM012_75]',
										value: note,
										constraint: 'Memo',
										option: {width: '500px'},
										enable: true,
										readonly: false}" />
						</div>
					</div>
				</div>
			</div>
		</ui:define>
	</ui:composition>
</body>
</html>