<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:com="http://xmlns.jcp.org/jsf/component"
	xmlns:h="http://xmlns.jcp.org/jsf/html">
<body>
	<ui:composition template="../../../../master/dialog.xhtml">
		<ui:define name="htmlHead">
			<com:ValidatorScript>
				nts.uk.ctx.at.request.dom.setting.company.mailsetting.mailapplicationapproval.ApplicationEmailBody
			</com:ValidatorScript>
			<script>var dialogSize = { width: 850, height: 550 };</script>
			<com:scriptfile set="IGNITE" />
			<com:scriptfile path="kdl030.a.start.js" />
			<com:scriptfile path="kdl030.a.vm.js" />
			<com:scriptfile path="kdl030.a.service.js" />
			<com:stylefile path="kdl030.a.main.css" />
		</ui:define>
		<ui:define name="content">
			
			<div id="contents-area" style="width: 800px; height: 350px">
				<div class="label-div">
					<label>#{i18n.getText('KDL030_2')}</label>
				</div>
				<div class="table valign-center">
					<div class="cell">
						<div id="A1_1" class="column1"
							data-bind="ntsFormLabel: { required: true }">#{i18n.getText('KDL030_3')}</div>
					</div>
					<div id = "A2_2" tabindex = "1" >
						<table id="table-phase">
						<thead>
							<tr class="bg-green">
								<th class="phase-app" style="width: 111px;">#{i18n.getText('KDL030_10')}</th>
								<th class="order-app" style="width: 111px;">#{i18n.getText('KDL030_11')}</th>
								<th class="name-app" style="width: 300px;">#{i18n.getText('KDL030_12')}</th>
								<th class="status-app" style="width: 100px;">#{i18n.getText('KDL030_13')}</th>
								<th class="isMail-app" style="width: 200px;">#{i18n.getText('KDL030_14')}</th>
							</tr>
						</thead>
						<tbody data-bind="foreach: approvalRootState">
							<com:ko bind="$data.listApprovalFrame" tag="foreach">
								<tr style="cursor:pointer;">
									<com:ko bind="$index() === 0" tag="if">
										<td data-bind="attr: {rowspan: $parent.listApprovalFrame().length}, text: 'フェーズ'+$parent.phaseOrder()" style="width: 111px;"  class="bg-green"></td>
									</com:ko>
									<td data-bind="text: '承認者'+$data.frameOrder()" style="width: 111px; text-align: left; padding-left: 5px;"  class="bg-green" ></td>
									<td data-bind="foreach: $data.listApprover" style="width: 230px; text-align: left; padding-left: 5px;">
										<com:ko bind="$index() != 0" tag="if">
											<label></label>
										</com:ko>
										<div style="display: inline-block;">
											<label data-bind="text: $data.approverName()"></label>
											<div style="display: inline-block;" data-bind="if: $data.representerName().length > 0">
												<label data-bind="text: '(' + $data.representerName() + ')'"></label>
											</div>
										</div>									
									</td>
									<td data-bind="text: $data.approvalAtrName()" style="width: 111px; text-align: left; padding-left: 5px;"  ></td>
 									<td data-bind="foreach: $data.listApprover"> 
 										<div class="cf" data-bind="ntsSwitchButton: { 
   										name: 'Sample Switch',   
   										options: $parents[2].optionList,   
  										optionsValue: 'dispCode',  
  										optionsText: 'dispName',  
  										value: $data.isSend, 
  										enable: $data.approverMail().length >= 0 }"></div> 
									</td>
								</tr>
							</com:ko>
						</tbody>
					</table>
					</div>
				</div>
				<div class="table valign-center">
					<div class="cell column1"></div>
					<div class="cell column2">
						<div id = "A3" tabindex = "2" data-bind="ntsCheckBox: { checked: isSendToApplicant, enable: applicant().smail.length >= 0, text: '#{i18n.getText('KDL030_4')}' }"></div>
					</div>
				</div>
				<div class="table valign-center">
					<div class="cell">
						<div id="A4_1" class="column1"
							data-bind="ntsFormLabel: { required : true,  constraint: 'ApplicationEmailBody' }">#{i18n.getText('KDL030_6')}</div>
					</div>
					<div class="cell column2">
						<textarea tabindex="3" id="A4_2"
							data-bind="ntsMultilineEditor: { 
									name: '#[KDL034_14]',
									value: mailContent,
									constraint: 'ApplicationEmailBody' }" />
					</div>
				</div>
			</div>
			<div id="functions-area-bottom">
				<button tabindex="4" class="x-large proceed"
					data-bind="click: sendMail">#{i18n.getText('KDL030_8')}</button>
				<button tabindex="5" data-bind="click: cancel">#{i18n.getText('KDL030_9')}</button>
			</div>
		</ui:define>
	</ui:composition>
</body>
</html>