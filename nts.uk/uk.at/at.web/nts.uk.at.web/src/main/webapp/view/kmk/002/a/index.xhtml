<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:com="http://xmlns.jcp.org/jsf/component"
	xmlns:h="http://xmlns.jcp.org/jsf/html">

<body>
	<ui:composition template="../../../../master/base.xhtml">
		<ui:define name="htmlHead">
			<com:ValidatorScript>
				nts.uk.ctx.at.record.dom.optitem.OptionalItemName
				nts.uk.ctx.at.record.dom.optitem.NumberRangeValue
				nts.uk.ctx.at.record.dom.optitem.TimeRangeValue
				nts.uk.ctx.at.record.dom.optitem.AmountRangeValue
			</com:ValidatorScript>
			<com:scriptfile set="IGNITE" />
			<com:stylefile path="kmk002.a.style.css" />
			<com:scriptfile path="kmk002.a.start.js" />
			<com:scriptfile path="kmk002.a.service.js" />
			<com:scriptfile path="kmk002.a.vm.js" />
		</ui:define>
		<ui:define name="content">
		<com:ko tag="with" bind="optionalItemHeader">
			<div id="functions-area">
				<button tabindex="1" class="proceed" data-bind="click: saveOptionalItemDetail">#{i18n.getText('KMK002_1')}</button>
			</div>
			<div id="contents-area" style="display: none" data-bind="visible: true">
				<table>
					<tr>
						<td style="vertical-align: top;">
							<div style="width: 300px; margin-right: 30px; padding: 20px " class="caret-right caret-background bg-green">
							<i class="icon icon-searchbox"></i>
							<div tabindex="2" data-bind="ntsSearchBox: {targetKey: 'itemNo', mode:'igGrid', comId:'tbl-master-list', items: optionalItemHeaders, 
								selected: selectedCode, selectedKey: 'itemNo', fields: ['itemNo', 'itemName']}" />
							<table tabindex="4" id="tbl-master-list"
								data-bind="ntsGridList: {
								name: '#[KMK002_6]',
							width: 300,
							dataSource: optionalItemHeaders,
							optionsValue: 'itemNo',
							columns: columns,
							multiple: false,
							value: selectedCode,
							rows: 15}">
							</table>
						</div>
						</td>
						<td style="vertical-align: top;">
						<com:ko tag="with" bind="optionalItem">
							<table class="control-group">

							<!-- Optional Item view model -->
							
								<tr>
									<td><div data-bind="ntsFormLabel: {required: true, constraint: 'OptionalItemName'}">#{i18n.getText('KMK002_11')}</div></td>
									<td><input tabindex="5" id="inpName"
										data-bind="ntsTextEditor: {
												  name: '#[KMK002_12]',
		                                          value: optionalItemName,
		                                          constraint: 'OptionalItemName', 
		                                          enable: true, 
		                                          required: true}"/></td>
								</tr>
								<tr>
									<!-- Usage Atr -->
									<td><div data-bind="ntsFormLabel: {required: true}">#{i18n.getText('KMK002_13')}</div></td>
									<td><div tabindex="7"
											data-bind="ntsSwitchButton: {
											name: '#[KMK002_13]',
											options: usageClsDatasource,
											optionsValue: 'code',
											optionsText: 'name',
											value: usageAtr,
											enable: true }"></div>
									</td>

									<!-- Calculation ResultRange -->
									<td>
										<div data-bind="ntsFormLabel: {required: false}">#{i18n.getText('KMK002_25')}</div>
									</td>
									<td>
										<div tabindex="11" id="cb-upper"
											data-bind="ntsCheckBox: {
													name: '#[KMK002_26]',
													checked: calcResultRange.upperCheck,
													enable: true,
													text: nts.uk.resource.getText('KMK002_26') }"></div>
													
													<com:ko tag="if" bind="isNumberSelected()">
										<input tabindex="12" id="inp-upper-number"
										data-bind="ntsTextEditor: {
												  name: '#[KMK002_26]',
		                                          value: calcResultRange.numberUpper,
		                                          constraint: 'NumberRangeValue'}"/>
		                                          </com:ko>
		                                          
		                                          <com:ko tag="if" bind="isAmountSelected()">
										<input tabindex="12" id="inp-upper-amount"
										data-bind="ntsTextEditor: {
												  name: '#[KMK002_26]',
		                                          value: calcResultRange.amountUpper,
		                                          constraint: 'AmountRangeValue'}"/>
		                                          </com:ko>
		                                          
		                                          <com:ko tag="if" bind="isTimeSelected()">
										<input tabindex="12" id="inp-upper-time"
										data-bind="ntsTextEditor: {
												  name: '#[KMK002_26]',
		                                          value: calcResultRange.timeUpper,
		                                          constraint: 'TimeRangeValue'}"/>
		                                          </com:ko>
									</td>
								</tr>
								<tr>
									<!-- EmpCondition Atr -->
									<td><div data-bind="ntsFormLabel: {required: true}">#{i18n.getText('KMK002_16')}</div></td>
									<td><div tabindex="8"
											data-bind="ntsSwitchButton: {
											name: '#[KMK002_16]',
											options: empConClsDatasource,
											optionsValue: 'code',
											optionsText: 'name',
											value: empConditionAtr,
											enable: true }"></div>
										<button data-bind="click: openDialogB">#{i18n.getText('KMK002_19')}</button>
										</td>
									<td></td>
									
									<!-- Calculation ResultRange -->
									<td>
										<div tabindex="13" id="cb-lower"
											data-bind="ntsCheckBox: {
												name: '#[KMK002_27]',
												checked: calcResultRange.lowerCheck,
												enable: true,
												text: nts.uk.resource.getText('KMK002_27') }"></div>

										<com:ko tag="if" bind="isNumberSelected()">
										<input tabindex="14" id="inp-lower-number"
										data-bind="ntsTextEditor: {
												  name: '#[KMK002_27]',
		                                          value: calcResultRange.numberLower,
		                                          constraint: 'NumberRangeValue'}"/>
		                                          </com:ko>
		                                
		                                <com:ko tag="if" bind="isTimeSelected()">
										<input tabindex="14" id="inp-lower-time"
										data-bind="ntsTextEditor: {
												  name: '#[KMK002_27]',
		                                          value: calcResultRange.timeLower,
		                                          constraint: 'TimeRangeValue'}"/>
		                                          </com:ko>
	
										<com:ko tag="if" bind="isAmountSelected()">
										<input tabindex="14" id="inp-lower-amount"
										data-bind="ntsTextEditor: {
												  name: '#[KMK002_27]',
		                                          value: calcResultRange.amountLower,
		                                          constraint: 'AmountRangeValue'}"/>
		                                </com:ko>
									</td>
								</tr>
								<tr>
									<!-- Performance Atr -->
									<td><div data-bind="ntsFormLabel: {required: true}">#{i18n.getText('KMK002_20')}</div></td>
									<td><div tabindex="9"
											data-bind="ntsSwitchButton: {
											name: '#[KMK002_21]',
											options: perfClsDatasource,
											optionsValue: 'code',
											optionsText: 'name',
											value: performanceAtr,
											enable: true }"></div>
									</td>
								</tr>
								<tr>
									<!-- optionalItemAtr -->
									<td><div data-bind="ntsFormLabel: {required: true}">#{i18n.getText('KMK002_24')}</div></td>
									<td><div tabindex="10" style="width: 100px"
											data-bind="ntsComboBox: {
													name: '#[KMK002_24]',
													options: atrDataSource,
													optionsValue: 'code',
													value: optionalItemAtr,
													optionsText: 'name',
													editable: false,
													enable: true,
													columns: [
														{ prop: 'name', length: 1 },
													]}">
										</div></td>
								</tr>
								
							<!-- Optional Item view model -->
								<tr>
									<td><button tabindex="15">#{i18n.getText('KMK002_28')}</button></td>
									<td>
										<button tabindex="16">#{i18n.getText('KMK002_29')}</button>
										<button tabindex="17" class="danger">#{i18n.getText('KMK002_30')}</button>
									</td>
								</tr>
								<tr>
									<td colspan="5"><span>#{i18n.getText('KMK002_31')}</span>
										<input style="width: 700px" id="inp-apply-formula"
										data-bind="ntsTextEditor: {
		                                          value: applyFormula,
		                                          enable: false,
		                                          readonly: true,
		                                          required: false}"/>
		                                <button data-bind="click: openDialogC">test C</button>
										<button data-bind="click: openDialogD">test D</button>
									</td>
								</tr>
								<!-- Optional Item formula view model -->
								<tr>
									<td colspan="10">
										<table id="tbl-calc-formula"></table>
									</td>
								</tr>
							</table>
						</com:ko>
						</td>
					</tr>
				</table>
			</div>
		</com:ko>
		</ui:define>
	</ui:composition>
</body>

</html>
